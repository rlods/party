(this["webpackJsonpparty-app"]=this["webpackJsonpparty-app"]||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(2),o=a(0),s=a.n(o),i=a(21),l=a(3),u=a(19),d=a(18),m=(a(68),a(15)),p=a(50),b=a(17),f=a(5);const v={fetching:!1,error:null,medias:{album:{},playlist:{},track:{}}},g=[],k={stack:[]},h={playing:!1,track_percent:0},y={fetching:!1,error:null,room:null,access:{id:"",secret:""},color:{fg:"dark",bg:{r:255,g:255,b:255}},info:null,medias:[],playing:!1,position:0},E=()=>{const e={id:"",secret:""},t=localStorage.getItem("U");if(t)try{const a=JSON.parse(atob(t));"string"===typeof a.i&&"string"===typeof a.s&&(e.id=a.i,e.secret=a.s,console.debug("Loaded user access: ",e))}catch(a){}return e},w={fetching:!1,error:null,user:null,access:{id:"",secret:""},info:null},O=Object(m.combineReducers)({medias:(e=v,t)=>{switch(t.type){case"medias/FETCHING":return Object(f.a)({},e,{fetching:!0,error:null});case"medias/FETCHED":return Object(f.a)({},e,{fetching:!1,error:null});case"medias/ERROR":return Object(f.a)({},e,{fetching:!1,error:t.payload});case"medias/SET":{const c=Object(f.a)({},e,{medias:{album:Object(f.a)({},e.medias.album),playlist:Object(f.a)({},e.medias.playlist),track:Object(f.a)({},e.medias.track)}});var a,r=Object(b.a)(t.payload);try{for(r.s();!(a=r.n()).done;){const e=a.value;c.medias[e.type][e.id]=e}}catch(n){r.e(n)}finally{r.f()}return c}case"medias/RESET":return v;default:return e}},messages:(e=g,t)=>{switch(t.type){case"message/ADD":return[t.payload,...e];case"message/REMOVE":return e.filter(e=>e.id!==t.payload);case"message/RESET":return g;default:return e}},modals:(e=k,t)=>{switch(t.type){case"modals/OPEN":return Object(f.a)({},e,{stack:[t.payload]});case"modals/CLOSE":return Object(f.a)({},e,{stack:[]});case"modals/PUSH":return Object(f.a)({},e,{stack:[...e.stack,t.payload]});case"modals/POP":const a=[...e.stack];return a.pop(),Object(f.a)({},e,{stack:a});default:return e}},player:(e=h,t)=>{switch(t.type){case"player/SET":return Object(f.a)({},e,{},t.payload);case"player/RESET":return h;default:return e}},room:(e=y,t)=>{switch(t.type){case"room/FETCHING":return Object(f.a)({},e,{fetching:!0,error:null});case"room/FETCHED":return Object(f.a)({},e,{fetching:!1,error:null});case"room/ERROR":return Object(f.a)({},e,{fetching:!1,error:t.payload});case"room/SET":return Object(f.a)({},e,{},t.payload);case"room/RESET":return y;default:return e}},user:(e=Object(f.a)({},w,{access:E()}),t)=>{switch(t.type){case"user/FETCHING":return Object(f.a)({},e,{fetching:!0,error:null});case"user/FETCHED":return Object(f.a)({},e,{fetching:!1,error:null});case"user/ERROR":return Object(f.a)({},e,{fetching:!1,error:t.payload});case"user/SET":{const a=Object(f.a)({},e,{},t.payload);return(({id:e,secret:t})=>{localStorage.setItem("U",btoa(JSON.stringify({i:e,s:t})))})(a.access),a}case"user/RESET":return localStorage.removeItem("U"),w;default:return e}}});var j=a(8),x=a.n(j),_=a(51),C=a.n(_),S=a(4),N=a(55),P=a.n(N);a(81);const T=s.a.memo(({className:e,color:t,icon:a,size:r="M",title:n})=>s.a.createElement(P.a,{className:x()("Icon",e,r),name:a,style:{color:t},title:n}));a(82);const R=s.a.memo(({className:e,color:t,disabled:a=!1,displayTitle:r=!1,icon:n,kind:c="default",onClick:o,size:i,title:l,type:u="button"})=>s.a.createElement("button",{type:u,"aria-label":l,className:x()("IconButton",e,c,i,{clickable:!a&&(!!o||"submit"===u)}),onClick:a?void 0:o,title:l},s.a.createElement(T,{color:t,icon:n,size:i}),r&&s.a.createElement("div",{className:x()("IconButtonTitle",i)},l))),M=function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(e=>{const a=document.createElement("textarea");a.value=t,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a);const r=document.getSelection();if(null!==r){const e=r.rangeCount>0&&r.getRangeAt(0);a.select(),document.execCommand("copy"),!1!==e&&(r.removeAllRanges(),r.addRange(e))}document.body.removeChild(a),e()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=e=>e.room.info,I=e=>!!e.room.room,A=e=>!e.room.access.secret;function F(e,t){return void 0===t?{type:e}:{type:e,payload:t}}let z=0;const U=(e,t,a=5e3)=>r=>{const n=z++;r(F("message/ADD",{id:n,stamp:(new Date).getTime(),text:t,type:e})),setTimeout(()=>r((e=>F("message/REMOVE",e))(n)),a)},q=e=>t=>{t(U("error",e,3e3))},W=e=>U("info",e,3e3),D=e=>F("modals/OPEN",e),B=()=>F("modals/POP"),V=(e,t,a)=>Object(c.a)(n.a.mark((function r(){return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:window.confirm(e)?t():a&&a();case 1:case"end":return r.stop()}}),r)})));a(83);const G=()=>{const e=Object(l.b)(),t=Object(S.b)().t,a=Object(d.g)(),r=Object(l.c)(L),i=Object(l.c)(e=>e.room.medias.length),u=Object(o.useCallback)(Object(c.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(document.location.href.split("?")[0]);case 2:e(W("rooms.link_copied_to_clipboard"));case 3:case"end":return t.stop()}}),t)}))),[e]),m=Object(o.useCallback)(()=>{e(V(t("rooms.confirm_exit"),()=>{a.push("/")}))},[t,e,a]);return s.a.createElement("div",{className:"Head"},s.a.createElement("div",{className:"RoomLink"},s.a.createElement(R,{icon:"link",onClick:u,size:"M",title:t("rooms.copy_link")})),s.a.createElement("div",{className:"RoomMeta"},r?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"RoomName"},r.name),s.a.createElement("div",{className:"RoomSize"},"\xa0--\xa0",t("rooms.track_count",{count:i}))):null),s.a.createElement("div",{className:"RoomExit"},s.a.createElement(R,{onClick:m,icon:"sign-out",size:"M",title:t("rooms.exit")})))},H=s.a.memo(({size:e})=>s.a.createElement(T,{className:"rotating",icon:"circle-o-notch",size:e,title:"Loading"}));a(85);const J=s.a.memo(({playable:e,playing:t,image:a,onPlay:r,onStop:n})=>{const c=Object(S.b)().t;return e?s.a.createElement("div",{className:x()("Cover",{playable:e,playing:t}),style:a?{backgroundImage:"url('".concat(a,"')")}:{},onClick:t?n:r},t?s.a.createElement(T,{icon:"pause",title:c("player.stop")}):s.a.createElement(T,{icon:"play",title:c("player.play")})):s.a.createElement("div",{className:x()("Cover",{playing:t}),style:a?{backgroundImage:"url('".concat(a,"')")}:{}},t?s.a.createElement(T,{icon:"music",title:c("player.playing")}):null)});a(86);const Q=s.a.memo(({actions:e,media:t,mediaType:a,playable:r,playing:n,onPlay:c,onStop:o})=>{const i=Object(S.b)().t;if(t){if("album"===a){const a=t;return s.a.createElement("div",{className:"Media Album"},e,s.a.createElement(J,{playable:r,playing:n,image:a.cover_small,onPlay:c,onStop:o}),s.a.createElement("div",{className:"Metas"},s.a.createElement("div",{className:"Meta AlbumTitle"},s.a.createElement("a",{href:a.link,target:"_blank",rel:"noopener noreferrer"},a.title)),s.a.createElement("div",{className:"Meta AlbumArtist"},s.a.createElement("a",{href:a.artist.link,target:"_blank",rel:"noopener noreferrer"},i("medias.by",{artist:a.artist.name})))))}if("playlist"===a){const a=t;return s.a.createElement("div",{className:"Media Playlist"},e,s.a.createElement(J,{playable:r,playing:n,image:a.picture_small,onPlay:c,onStop:o}),s.a.createElement("div",{className:"Metas"},s.a.createElement("div",{className:"Meta PlaylistTitle"},s.a.createElement("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},t.title)),s.a.createElement("div",{className:"Meta PlaylistCreator"},s.a.createElement("a",{href:a.user.link,target:"_blank",rel:"noopener noreferrer"},i("medias.by",{artist:a.user.name})))))}if("track"===a){const a=t;return s.a.createElement("div",{className:"Media Track"},e,s.a.createElement(J,{playable:r&&!!a.preview,playing:n,image:a.album.cover_small,onPlay:c,onStop:o}),s.a.createElement("div",{className:"Metas"},s.a.createElement("div",{className:"Meta TrackTitle"},s.a.createElement("a",{href:a.link,target:"_blank",rel:"noopener noreferrer"},a.title)),s.a.createElement("div",{className:"Meta TrackArtist"},s.a.createElement("a",{href:a.artist.link,target:"_blank",rel:"noopener noreferrer"},i("medias.by",{artist:a.artist.name})))))}return null}return s.a.createElement("div",{className:"Media"},e,s.a.createElement(J,{playable:r,playing:n,image:"",onPlay:c,onStop:o}),s.a.createElement("div",{className:"Metas"},s.a.createElement(H,{size:"M"})))}),K=s.a.memo(({locked:e,media:t,mediaType:a,playing:r,onPlay:n,onRemove:c,onStop:o})=>{const i=Object(S.b)().t;return s.a.createElement("div",{className:"QueueItem"},s.a.createElement(Q,{media:t,mediaType:a,playable:!!t&&!e,playing:r,onPlay:n,onStop:o,actions:e?null:s.a.createElement(R,{title:i("medias.remove"),icon:"trash",onClick:c})}))});var X=a(7),$=a(111),Y=a(20);a(87);const Z={appIDs:"test-rl-7ffe8".split("|")};const ee=e=>new Promise(t=>setTimeout(t,e)),te=(e,t,a)=>a.indexOf(e)===t,ae=(e,t,a)=>((e,t)=>{const a=e[t];return a||void 0})(e,a)||((e,t)=>e.find(e=>e.id===t))(t,a),re={},ne=Z.appIDs[0],ce=(e=ne)=>{let t=re[e];if(!t){console.debug("[Firebase] Creating app",{appId:e});const a="https://".concat(e,".firebaseio.com"),r=Y.initializeApp({databaseURL:a}),n=Y.database(r);re[e]=t={app:r,database:n,members:n.ref("members"),rooms:n.ref("rooms"),users:n.ref("users")}}return t},oe=({id:e,secret:t})=>{const a=ce(),r=a.rooms.child(e),o=r.child("info"),s=a.members.child(e);let i=t||"",l={name:"dummy",playing:!1,queue:{},queue_position:0,timestamp:0,type:"dj"};return{getInfo:()=>l,id:e,isLocked:()=>!i,setSecret:e=>{console.debug("[Firebase] Setting room secret",{oldSecret:i,newSecret:e}),i=e},wait:function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((e,t)=>{console.debug("[Firebase] Waiting room..."),o.once("value",a=>{const r=a.val();r?(l=r,e(l)):t(new Error("rooms.errors.invalid"))})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),subscribeInfo:e=>{console.debug("[Firebase] Subscribing room..."),o.on("value",e)},subscribeMembers:(e,t)=>{console.debug("[Firebase] Subscribing members..."),s.on("child_added",e),s.on("child_removed",t)},unsubscribeInfo:e=>{console.debug("[Firebase] Unsubscribing room..."),o.off("value",e)},unsubscribeMembers:(e,t)=>{console.debug("[Firebase] Unsubscribing members..."),s.off("child_added",e),s.off("child_removed",t)},update:function(){var e=Object(c.a)(n.a.mark((function e({name:t,playing:a,queue:c,queue_position:o}){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("[Firebase] Updating room...",{name:t,playing:a,queue:c,queue_position:o}),void 0!==t&&(l.name=t),void 0!==a&&(l.playing=a),void 0!==c&&(l.queue=c),void 0!==o&&(l.queue_position=o),e.next=7,r.set({info:Object(f.a)({},l,{timestamp:Y.database.ServerValue.TIMESTAMP}),secret:i});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},se=({id:e,secret:t})=>{const a=ce().users.child(e),r=a.child("info");let o=null,s=t||"",i={name:"dummy",online:!1,room_id:"",status:"",timestamp:0};const l=function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((e,t)=>{console.debug("[Firebase] Waiting user..."),r.once("value",a=>{const r=a.val();r?(i=r,e(i)):t(new Error("users.errors.invalid"))})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(n.a.mark((function e({name:t,room_id:r}){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("[Firebase] Updating user...",{name:t,room_id:r}),void 0!==t&&(i.name=t),void 0!==r&&(i.room_id=r),e.next=5,a.set({info:Object(f.a)({},i,{online:!0,status:"online",timestamp:Y.database.ServerValue.TIMESTAMP}),secret:s});case 5:d();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=()=>{console.debug("[Firebase] Installing user disconnect..."),a.onDisconnect().cancel(),a.onDisconnect().set({info:Object(f.a)({},i,{online:!1,room_id:"",status:"disconnected",timestamp:Y.database.ServerValue.TIMESTAMP}),secret:s})};return{id:e,enter:function(){var t=Object(c.a)(n.a.mark((function t(a){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=ce(),!o){t.next=5;break}return t.next=4,o.remove();case 4:o=null;case 5:return t.next=7,u({room_id:a.id});case 7:return o=r.members.child(a.id).child(e),o.onDisconnect().remove(),t.next=11,o.set({timestamp:Y.database.ServerValue.TIMESTAMP});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),exit:function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=4;break}return e.next=3,o.remove();case 3:o=null;case 4:return e.next=6,u({room_id:""});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isLocked:()=>!s,setSecret:e=>{console.debug("[Firebase] Setting user secret...",{oldSecret:s,newSecret:e}),s=e},wait:l,subscribeInfo:e=>{console.debug("[Firebase] Subscribing user..."),r.on("value",e)},unsubscribeInfo:e=>{console.debug("[Firebase] Unsubscribing user..."),r.off("value",e)},update:u,getInfo:()=>i}},ie=e=>e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message,le=()=>function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a(),!(c=r.room.room)||c.isLocked()){e.next=14;break}return e.prev=2,console.debug("Clearing queue..."),e.next=6,c.update({queue:{},queue_position:0});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),t(q(ie(e.t0))),t(je());case 12:e.next=15;break;case 14:t(q("rooms.error.locked"));case 15:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a){return e.apply(this,arguments)}}(),ue=(e,t)=>function(){var a=Object(c.a)(n.a.mark((function a(r,c){var o,s,i,l,u;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=c(),!(s=o.room.room)||s.isLocked()){a.next=18;break}if(!(t.length>0)){a.next=16;break}return i=c(),l=i.room.medias,a.prev=4,console.debug("Appending queue...",{trackIds:t}),u={},[...l.map(e=>e.id),...t].forEach((t,a)=>{u[a]={id:t,provider:e,type:"track"}}),a.next=10,s.update({queue:u});case 10:a.next=16;break;case 12:a.prev=12,a.t0=a.catch(4),r(q(ie(a.t0))),r(je());case 16:a.next=19;break;case 18:r(q("rooms.error.locked"));case 19:case"end":return a.stop()}}),a,null,[[4,12]])})));return function(e,t){return a.apply(this,arguments)}}(),de=e=>function(){var t=Object(c.a)(n.a.mark((function t(a,r){var c,o,s,i,l,u,d,m;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r(),o=c.room,s=o.medias,i=o.position,!(l=o.room)||l.isLocked()){t.next=20;break}if(!(e<s.length)){t.next=18;break}return t.prev=3,console.debug("Removing from queue...",{index:e}),u=i%s.length,d={},(m=[...s]).splice(e,1),m.forEach((e,t)=>{d[t]=e}),t.next=12,l.update({queue:d,queue_position:e<u?i-1:i});case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),a(q(ie(t.t0))),a(je());case 18:t.next=21;break;case 20:a(q("rooms.error.locked"));case 21:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e,a){return t.apply(this,arguments)}}(),me=e=>function(){var t=Object(c.a)(n.a.mark((function t(a,r){var c,o,s,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r(),o=c.room,s=o.position,!(i=o.room)||i.isLocked()){t.next=15;break}if(s===e){t.next=13;break}return t.prev=3,console.debug("Set queue position...",{oldPosition:s,newPosition:e}),t.next=7,i.update({queue_position:e});case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),a(q(ie(t.t0))),a(je());case 13:t.next=16;break;case 15:a(q("rooms.error.locked"));case 16:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,a){return t.apply(this,arguments)}}(),pe=()=>function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r,c,o,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(),c=r.room,o=c.medias,s=c.position,o.length>0&&(console.debug("Moving backward..."),t(me(s>0?s-1:o.length-1)));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),be=()=>function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r,c,o,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(),c=r.room,o=c.medias,s=c.position,o.length>0&&(console.debug("Moving forward..."),t(me(s+1)));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),fe=e=>F("medias/SET",e),ve=(e,t,a,r,o)=>function(){var s=Object(c.a)(n.a.mark((function c(s,i,{deezer:l,previewPlayer:u}){var d,m,p,f,v,g,k,h,y,E,w,O,j,x,_,C,S,N,P;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a.length>0)){n.next=72;break}if(d=i(),m=d.medias.medias,n.prev=2,"track"!==t){n.next=26;break}if(p=m.track,f=a.filter(e=>!p[e]).filter(te),v=[],!(f.length>0)){n.next=13;break}return console.debug("Loading tracks...",{mediaIds:f}),n.next=11,l.loadTracks(f);case 11:v=n.sent,s(fe(v));case 13:if(r&&(console.debug("Enqueuing tracks...",{mediaIds:a}),s(ue(e,a))),!o){n.next=24;break}if(g=a[0],!(k=ae(p,v,g))){n.next=23;break}return console.debug("Previewing track...",{track:k,trackId:g}),n.next=21,u.play(0,k.id,k.preview,0);case 21:n.next=24;break;case 23:console.debug("Cannot load track to preview...");case 24:n.next=67;break;case 26:if(h=m[t],y=a.filter(e=>!h[e]).filter(te),E=[],!(y.length>0)){n.next=38;break}return console.debug("Loading containers...",{mediaIds:y}),n.next=33,l.loadContainers(t,y);case 33:E=n.sent,w=[...E],O=Object(b.a)(E);try{for(O.s();!(j=O.n()).done;)x=j.value,w.push(...x.tracks)}catch(c){O.e(c)}finally{O.f()}s(fe(w));case 38:if(r){console.debug("Enqueuing containers tracks...",{mediaIds:a}),_=Object(b.a)(a);try{for(_.s();!(C=_.n()).done;)S=C.value,(x=ae(h,E,S))&&s(ue(e,x.tracks.map(e=>e.id)))}catch(c){_.e(c)}finally{_.f()}}if(!o){n.next=67;break}k=null,N=Object(b.a)(a),n.prev=42,N.s();case 44:if((P=N.n()).done){n.next=52;break}if(S=P.value,!((x=ae(h,E,S))&&x.tracks&&x.tracks.length>0)){n.next=50;break}return k=x.tracks[0],n.abrupt("break",52);case 50:n.next=44;break;case 52:n.next=57;break;case 54:n.prev=54,n.t0=n.catch(42),N.e(n.t0);case 57:return n.prev=57,N.f(),n.finish(57);case 60:if(!k){n.next=66;break}return console.debug("Previewing container first track..."),n.next=64,u.play(0,k.id,k.preview,0);case 64:n.next=67;break;case 66:console.debug("Cannot load track to preview...");case 67:n.next=72;break;case 69:n.prev=69,n.t1=n.catch(2),s(q(ie(n.t1)));case 72:case"end":return n.stop()}}),c,null,[[2,69],[42,54,57,60]])})));return function(e,t,a){return s.apply(this,arguments)}}();var ge=a(10),ke=Object(ge.b)();const he=e=>F("room/SET",e),ye=(e,t)=>function(){var a=Object(c.a)(n.a.mark((function a(r){var c;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c=Object($.a)(),console.debug("Creating room...",{id:c,secret:t}),a.next=5,oe({id:c,secret:t}).update({name:e});case 5:r(we(c,t)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),r(q(ie(a.t0)));case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}();let Ee=null;const we=(e,t)=>function(){var a=Object(c.a)(n.a.mark((function a(r,c){var o,s,i;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=c(),(s=o.room.room)&&s.id===e){a.next=23;break}return r(Oe()),a.prev=3,console.debug("Entering room...",{id:e,secret:t}),i=oe({id:e,secret:t}),a.t0=r,a.t1=he,a.t2={id:e,secret:t},a.t3=i,a.next=12,i.wait();case 12:a.t4=a.sent,a.t5={access:a.t2,room:a.t3,info:a.t4},a.t6=(0,a.t1)(a.t5),(0,a.t0)(a.t6),Ee=i.subscribeInfo(e=>{const t=e.val();console.debug("[Firebase] Received room update...",t);let a=[];t.queue&&(a=Object.entries(t.queue).sort((e,t)=>Number(e[0])-Number(t[0])).map(e=>e[1]),r(ve("deezer","track",a.map(e=>e.id),!1,!1))),r(he({medias:a,playing:t.playing,position:t.queue_position,room:i,info:t}))}),ke.push("/room/".concat(e,"?secret=").concat(t)),a.next=23;break;case 20:a.prev=20,a.t7=a.catch(3),r(q(ie(a.t7)));case 23:case"end":return a.stop()}}),a,null,[[3,20]])})));return function(e,t){return a.apply(this,arguments)}}(),Oe=()=>function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(),(c=r.room.room)&&(console.debug("Exiting room..."),c.unsubscribeInfo(Ee),Ee=null,t(F("room/RESET")));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),je=()=>function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r,c,o,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(),c=r.room,o=c.room,s=c.access.id,o&&o.id===s&&(console.debug("Locking room...",{id:s}),o.setSecret(""),ke.replace("/room/".concat(s)),t(he({access:{id:s,secret:""}})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),xe=e=>function(){var t=Object(c.a)(n.a.mark((function t(a,r){var c,o,s,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=r(),o=c.room,s=o.room,i=o.access.id,s&&s.id===i&&(console.debug("Unlocking room...",{id:i,secret:e}),s.setSecret(e),ke.replace("/room/".concat(i,"?secret=").concat(e)),a(he({access:{id:i,secret:e}})));case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();var _e=a(37);const Ce={},Se={bg:{r:255,g:255,b:255},fg:"dark"},Ne=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Se,!t){e.next=18;break}if(a=Ce[t]){e.next=18;break}return e.prev=4,e.next=7,_e.read(t);case 7:return r=e.sent,e.next=10,r.resize(1,1).getPixelColor(0,0);case 10:c=e.sent,o=_e.intToRGBA(c),Ce[t]=a={bg:o,fg:.299*o.r+.587*o.g+.114*o.b>186?"dark":"light"},e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.debug("An error prevented colorpicking",e.t0);case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),Pe=e=>F("player/SET",e),Te=()=>function(){var e=Object(c.a)(n.a.mark((function e(t,a,{queuePlayer:r}){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Le||Ie||(Fe(t,a,r),ze(t,a,r),t(Pe({playing:!0})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),Re=()=>function(){var e=Object(c.a)(n.a.mark((function e(t,a,{queuePlayer:r}){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Le||!Ie){e.next=8;break}return clearTimeout(Le),Le=null,clearTimeout(Ie),Ie=null,e.next=7,r.stop();case 7:t(F("player/RESET"));case 8:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),Me=()=>function(){var e=Object(c.a)(n.a.mark((function e(t,a,{previewPlayer:r}){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("Stop previewing..."),e.next=3,r.stop();case 3:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}();let Le=null,Ie=null;const Ae=(e,t,a)=>{let r=-1;const n=e.getPlayingTrackID(),c=e.getPlayingTrackPosition();return c!==t?r=e.isPlaying()?t:c>=0?c:t:n!==a[t%a.length].id&&(r=t),r},Fe=(e,t,a)=>{Le=setTimeout(Object(c.a)(n.a.mark((function r(){var c,o,s,i,l,u,d,m,p,b,f;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=t(),o=c.room,s=o.medias,i=o.position,l=c.medias.medias.track,!(s.length>0)){r.next=23;break}if(!((u=Ae(a,i,s))>=0)){r.next=20;break}return d=u%s.length,m=l[s[d].id],console.debug("Detected play change...",{nextIndex:d,nextTrack:m,nextTrackPosition:u}),r.prev=7,e(me(u)),r.next=11,Promise.all([Ne(m.album.cover_small),a.play(u,m.id,m.preview,0)]);case 11:p=r.sent,b=Object(X.a)(p,1),f=b[0],e(he({color:f})),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(7),e(q(ie(r.t0)));case 20:Fe(e,t,a),r.next=25;break;case 23:console.debug("No more tracks in queue..."),e(Re());case 25:case"end":return r.stop()}}),r,null,[[7,17]])}))),250)},ze=(e,t,a)=>{Ie=setTimeout(()=>{t().room.medias.length>0&&(e(Pe({track_percent:a.getPlayingTrackPercent()})),ze(e,t,a))},250)};a(89);const Ue=()=>{const e=Object(l.b)(),t=Object(l.c)(I),a=Object(l.c)(A),r=Object(l.c)(e=>e.player.playing),n=Object(l.c)(e=>e.room.position%e.room.medias.length),c=Object(l.c)(e=>((e,t)=>{const a=[],r=e.medias.medias;var n,c=Object(b.a)(t);try{for(c.s();!(n=c.n()).done;){const e=n.value,t=r[e.type][e.id];t?a.push(t):a.push(null)}}catch(o){c.e(o)}finally{c.f()}return a})(e,e.room.medias)),i=Object(o.useCallback)(t=>{e(Te()),e(me(t))},[e]),u=Object(o.useCallback)(t=>e(de(t)),[e]),d=Object(o.useCallback)(()=>e(D({type:"Search",props:null})),[e]),m=Object(o.useCallback)(()=>e(Re()),[e]);return s.a.createElement("div",{className:"Queue"},c.length>0?s.a.createElement(We,{locked:a,medias:c,playing:r,playingIndex:n,onPlay:i,onRemove:u,onStop:m}):s.a.createElement(qe,{loaded:t,locked:a,onSearch:d}))},qe=s.a.memo(({loaded:e,locked:t,onSearch:a})=>{const r=Object(S.b)().t;return s.a.createElement("div",{className:"QueueEmpty"},e?s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{title:"...",icon:"shower",onClick:a,size:"L"}),s.a.createElement("span",{onClick:a},r(t?"rooms.empty_for_now":"rooms.empty"))):s.a.createElement(s.a.Fragment,null,s.a.createElement(H,{size:"L"}),s.a.createElement("span",null,r("rooms.loading"))))}),We=s.a.memo(({locked:e,medias:t,playing:a,playingIndex:r,onPlay:n,onRemove:c,onStop:o})=>s.a.createElement(s.a.Fragment,null,t.map((t,i)=>s.a.createElement(K,{key:i,locked:e,playing:a&&r===i,media:t,mediaType:"track",onPlay:()=>n(i),onRemove:()=>c(i),onStop:o}))));a(90);const De=()=>{const e=Object(l.c)(e=>e.player.track_percent);return s.a.createElement("div",{className:"Progress"},s.a.createElement("progress",{max:100,value:100*e}))};a(91);const Be=()=>{const e=Object(l.b)(),t=Object(S.b)().t,a=Object(l.c)(e=>e.room.medias.length),r=Object(l.c)(A),n=Object(l.c)(e=>e.player.playing),c=Object(o.useCallback)(()=>{e(V(t("rooms.confirm_clear"),()=>{e(le()),e(Re())}))},[e,t]),i=Object(o.useCallback)(()=>{e(V(t("rooms.confirm_lock"),()=>{e(je())}))},[e,t]),u=Object(o.useCallback)(()=>{e(D({type:"UnlockRoom",props:null}))},[e]),d=Object(o.useCallback)(()=>e(pe()),[e]),m=Object(o.useCallback)(()=>e(be()),[e]),p=Object(o.useCallback)(()=>e(Te()),[e]),b=Object(o.useCallback)(()=>e(D({type:"Search",props:null})),[e]),f=Object(o.useCallback)(()=>e(Re()),[e]);return s.a.createElement("div",{className:"Controls"},s.a.createElement("div",{className:"ControlsSet"},s.a.createElement("div",{className:"Control"},s.a.createElement(R,{disabled:r||0===a,icon:"step-backward",onClick:d,size:"M",title:t("player.backward")})),s.a.createElement("div",{className:"Control"},n?s.a.createElement(R,{disabled:r||0===a,onClick:f,icon:"pause",title:t("player.stop"),size:"L"}):s.a.createElement(R,{disabled:r||0===a,onClick:p,icon:"play",size:"L",title:t("player.play")})),s.a.createElement("div",{className:"Control"},s.a.createElement(R,{disabled:r||0===a,icon:"step-forward",onClick:m,size:"M",title:t("player.forward")}))),s.a.createElement(De,null),s.a.createElement("div",{className:"ControlsSet"},s.a.createElement("div",{className:"Control"},s.a.createElement(R,{disabled:r||0===a,onClick:c,icon:"trash",title:t("rooms.clear")})),s.a.createElement("div",{className:"Control"},s.a.createElement(R,{onClick:b,icon:"search",title:t("medias.search")})),s.a.createElement("div",{className:"Control"},r?s.a.createElement(R,{icon:"lock",onClick:u,size:"M",title:t("rooms.locked")}):s.a.createElement(R,{icon:"unlock",onClick:i,size:"M",title:t("rooms.unlocked")}))))};a(92);const Ve=()=>{const e=Object(l.b)(),t=Object(l.c)(e=>e.room.color),a=t.fg,r=t.bg,n=Object(d.h)().search,c=Object(d.i)().room_id,i=C.a.parse(n.substr(1)).secret;return Object(o.useEffect)(()=>(e(we(c,i||"")),()=>{e(Oe())}),[e,c,i]),s.a.createElement("div",{className:x()("Room",a),style:{backgroundColor:"rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b,")")}},s.a.createElement(G,null),s.a.createElement(Ue,null),s.a.createElement(Be,null))},Ge=e=>F("user/SET",e),He=(e,t)=>function(){var a=Object(c.a)(n.a.mark((function a(r){var c;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.debug("Creating user..."),c=Object($.a)(),a.next=5,se({id:c,secret:t}).update({name:e});case 5:r(Qe(c,t)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),r(q(ie(a.t0)));case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}();let Je=null;const Qe=(e,t)=>function(){var a=Object(c.a)(n.a.mark((function a(r,c){var o,s,i;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=c(),(s=o.user.user)&&s.id===e){a.next=23;break}return r(Ke()),a.prev=3,console.debug("Connection user...",{id:e,secret:t}),i=se({id:e,secret:t}),a.t0=r,a.t1=Ge,a.t2={id:e,secret:t},a.t3=i,a.next=12,i.wait();case 12:a.t4=a.sent,a.t5={access:a.t2,user:a.t3,info:a.t4},a.t6=(0,a.t1)(a.t5),(0,a.t0)(a.t6),Je=i.subscribeInfo(e=>{const t=e.val();console.debug("[Firebase] Received user update...",t),r(Ge({user:i,info:t}))}),a.next=23;break;case 19:a.prev=19,a.t7=a.catch(3),r(q(ie(a.t7))),r(Ge({access:{id:e,secret:""}}));case 23:case"end":return a.stop()}}),a,null,[[3,19]])})));return function(e,t){return a.apply(this,arguments)}}(),Ke=()=>function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r,c,o,s,i,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(),c=r.user,o=c.access,s=o.id,i=o.secret,l=c.user,(s||i||l)&&(console.debug("Disconnecting user..."),l&&(l.unsubscribeInfo(Je),Je=null),t(F("user/RESET")));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Xe=()=>function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r,c,o,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(),c=r.user.access,o=c.id,s=c.secret,o&&s&&(console.debug("Reconnecting user...",{id:o,secret:s}),t(Qe(o,s)));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();a(93);const $e=()=>{const e=Object(l.b)(),t=Object(l.c)(e=>!!e.user.access.id),a=Object(S.b)().t,r=Object(o.useCallback)(()=>e(D({type:"CreateRoom",props:null})),[e]),n=Object(o.useCallback)(()=>e(D({type:"CreateUser",props:null})),[e]),c=Object(o.useCallback)(()=>e(Ke()),[e]);return s.a.createElement("div",{className:"Splash"},s.a.createElement("div",{className:"Top"},s.a.createElement("div",{className:"Logo"},s.a.createElement(u.b,{to:"/"},"Party")),s.a.createElement("div",{className:"PoweredWith"},s.a.createElement("span",null,a("splash.powered_with")),s.a.createElement("a",{href:"https://www.deezer.com",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"/images/deezer.svg",height:"20px",title:"Deezer",alt:"Deezer Logo"})))),s.a.createElement("div",{className:"Middle"},s.a.createElement("div",{className:"Menu"},t?s.a.createElement("div",{className:"MenuItem"},s.a.createElement(R,{displayTitle:!0,icon:"plus",onClick:r,size:"L",title:a("rooms.create")})):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"MenuItem"},s.a.createElement(R,{displayTitle:!0,onClick:n,icon:"sign-in",size:"L",title:a("users.connect")}))))),s.a.createElement("div",{className:"Bottom"},s.a.createElement("div",{className:"Menu"},t?s.a.createElement("div",{className:"MenuItem"},s.a.createElement(R,{displayTitle:!0,icon:"sign-out",onClick:c,size:"M",title:a("users.disconnect")})):s.a.createElement("div",{className:"MenuItem"},s.a.createElement(R,{displayTitle:!0,icon:"info",onClick:()=>{},size:"M",title:a("splash.CGU")})))))};var Ye=a(24);const Ze=({children:e,className:t,title:a,renderFoot:r,onSubmit:n})=>{const c=Object(l.b)(),i=Object(S.b)().t,u=Object(l.c)(e=>e.modals.stack.length>1),d=Object(o.useCallback)(()=>c(F("modals/CLOSE")),[c]),m=Object(o.useCallback)(()=>c(B()),[c]);return s.a.createElement("form",{className:x()("Modal",t),onSubmit:e=>{e.preventDefault(),n&&n()}},s.a.createElement("div",{className:"ModalHead"},s.a.createElement(R,{kind:"special",className:x()("ModalHeadBack",{hidden:!u}),icon:"angle-left",title:"Back",onClick:m}),s.a.createElement("div",{className:"ModalTitle"},a),s.a.createElement(R,{kind:"special",className:"ModalHeadClose",onClick:d,title:i("cancel"),icon:"times"})),s.a.createElement("div",{className:"ModalBody"},e),s.a.createElement("div",{className:"ModalFoot"},r&&r()))};a(94);const et=({children:e,className:t,renderButtons:a,title:r,onSubmit:n})=>s.a.createElement(Ze,{className:x()("FormModal",t),title:r,renderFoot:a,onSubmit:n},e),tt=({onClick:e})=>{const t=Object(S.b)().t;return s.a.createElement(R,{onClick:e,title:t("cancel"),kind:"default",icon:"ban"})},at=({question:e,onCanceled:t,onConfirmed:a})=>{const r=Object(l.b)(),n=Object(S.b)().t,c=Object(o.useCallback)(()=>{r(B()),t&&t()},[r,t]);return s.a.createElement(et,{title:n("confirm"),onSubmit:a,renderButtons:()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{title:n("cancel"),kind:"primary",icon:"plus",type:"submit"}),s.a.createElement(tt,{onClick:c}))},e)},rt=({id:e,label:t,onChange:a,placeholder:r,value:i})=>{const u=Object(l.b)(),d=Object(S.b)().t,m=Object(o.useCallback)(Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(i);case 2:u(W("secret_copied_to_clipboard"));case 3:case"end":return e.stop()}}),e)}))),[u,i]);return s.a.createElement("div",{className:"ModalField"},s.a.createElement("label",{htmlFor:e},t),s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},s.a.createElement("input",{style:{flexGrow:1,marginRight:"0.5rem"},id:e,type:"password",autoComplete:"password",placeholder:r,maxLength:36,minLength:36,required:!0,value:i,onChange:e=>a(e.target.value)}),s.a.createElement(R,{icon:"clipboard",onClick:m,size:"M",title:d("copy_to_clipboard")})))},nt=()=>{const e=Object(l.b)(),t=Object(o.useState)(""),a=Object(X.a)(t,2),r=a[0],n=a[1],c=Object(o.useState)(""),i=Object(X.a)(c,2),u=i[0],d=i[1],m=Object(o.useRef)(null),p=Object(S.b)().t;Object(o.useEffect)(()=>{m.current&&m.current.focus()});const b=Object(o.useCallback)(()=>e(B()),[e]),f=Object(o.useCallback)(()=>{0!==r.trim().length?0!==u.trim().length?(e(Qe(r,u)),e(B())):e(q("users.secret_is_invalid")):e(q("users.id_is_invalid"))},[e,r,u]),v=Object(o.useCallback)(()=>e(D({type:"CreateUser",props:null})),[e]);return s.a.createElement(et,{title:p("users.connection"),onSubmit:f,renderButtons:()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{disabled:0===r.trim().length||36!==u.length,title:p("users.connect"),kind:"primary",icon:"sign-in",type:"submit"}),s.a.createElement(tt,{onClick:b}),s.a.createElement(R,{title:p("users.create"),kind:"default",icon:"plus",onClick:v}))},s.a.createElement("div",{className:"ModalField"},s.a.createElement("label",{htmlFor:"modal-id"},p("users.user_id")),s.a.createElement("input",{id:"modal-id",type:"text",placeholder:p("users.id_placeholder"),maxLength:36,minLength:36,required:!0,value:r,ref:m,onChange:e=>n(e.target.value)})),s.a.createElement("div",{className:"ModalField"},s.a.createElement("label",{htmlFor:"modal-secret"},p("users.secret")),s.a.createElement("input",{id:"modal-secret",type:"password",autoComplete:"password",placeholder:p("users.secret_placeholder"),maxLength:36,minLength:36,required:!0,value:u,onChange:e=>d(e.target.value)})))};let ct=1;const ot=()=>{const e=Object(l.b)(),t=Object(o.useState)(""),a=Object(X.a)(t,2),r=a[0],n=a[1],c=Object(o.useState)(Object($.a)()),i=Object(X.a)(c,2),u=i[0],d=i[1],m=Object(o.useRef)(null),p=Object(S.b)().t;Object(o.useEffect)(()=>{n("".concat(p("rooms.room")," ").concat(ct)),m.current&&m.current.focus()},[p]);const b=Object(o.useCallback)(()=>e(B()),[e]),f=Object(o.useCallback)(()=>{0!==r.trim().length?0!==u.trim().length?(e(ye(r,u)),e(B()),ct++):e(q("rooms.secret_is_invalid")):e(q("rooms.name_is_invalid"))},[e,r,u]);return s.a.createElement(et,{title:p("rooms.room_creation"),onSubmit:f,renderButtons:()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{disabled:0===r.trim().length||36!==u.length,title:p("rooms.create"),kind:"primary",icon:"plus",type:"submit"}),s.a.createElement(tt,{onClick:b}))},s.a.createElement("div",{className:"ModalField"},s.a.createElement("label",{htmlFor:"modal-name"},p("rooms.name")),s.a.createElement("input",{id:"modal-name",type:"text",placeholder:p("rooms.name_placeholder"),maxLength:100,minLength:2,required:!0,value:r,ref:m,onChange:e=>n(e.target.value)})),s.a.createElement(rt,{id:"modal-secret",label:p("rooms.key"),placeholder:p("rooms.key_placeholder"),value:u,onChange:d}))};let st=1;const it=()=>{const e=Object(l.b)(),t=Object(o.useState)(""),a=Object(X.a)(t,2),r=a[0],n=a[1],c=Object(o.useState)(Object($.a)()),i=Object(X.a)(c,2),u=i[0],d=i[1],m=Object(o.useRef)(null),p=Object(S.b)().t;Object(o.useEffect)(()=>{n("".concat(p("users.user")," ").concat(st)),m.current&&m.current.focus()},[p]);const b=Object(o.useCallback)(()=>e(B()),[e]),f=Object(o.useCallback)(()=>{0!==r.trim().length?0!==u.trim().length?(e(He(r,u)),e(B()),st++):e(q("users.secret_is_invalid")):e(q("users.name_is_invalid"))},[e,r,u]),v=Object(o.useCallback)(()=>{e(D({type:"ConnectUser",props:null}))},[e]);return s.a.createElement(et,{title:p("users.user_creation"),onSubmit:f,renderButtons:()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{disabled:0===r.trim().length||36!==u.length,title:p("users.create"),kind:"primary",icon:"plus",type:"submit"}),s.a.createElement(tt,{onClick:b}),s.a.createElement(R,{title:p("users.connect"),kind:"default",icon:"sign-in",onClick:v}))},s.a.createElement("div",{className:"ModalField"},s.a.createElement("label",{htmlFor:"modal-name"},p("users.name")),s.a.createElement("input",{id:"modal-name",type:"text",placeholder:p("users.name_placeholder"),maxLength:100,minLength:2,required:!0,value:r,ref:m,onChange:e=>n(e.target.value)})),s.a.createElement(rt,{id:"modal-secret",label:p("users.secret"),placeholder:p("users.secret_placeholder"),value:u,onChange:e=>d(e)}))};var lt=a(57),ut=a.n(lt);const dt=e=>({artist:{id:e.artist.id.toString(),name:e.artist.name,link:"https://www.deezer.com/artist/".concat(e.artist.id),picture_big:e.artist.picture_big,picture_small:e.artist.picture_small},cover_big:e.cover_big,cover_small:e.cover_small,id:e.id.toString(),link:"https://www.deezer.com/album/".concat(e.id),title:e.title,tracks:void 0!==e.tracks?e.tracks.data.filter(e=>e.readable&&e.preview).map(t=>pt(t,e)):void 0,type:"album"}),mt=(e,t)=>({id:e.id.toString(),link:"https://www.deezer.com/playlist/".concat(e.id),picture_big:e.picture_big,picture_small:e.picture_small,title:e.title,tracks:void 0!==e.tracks?e.tracks.data.filter(e=>e.readable&&e.preview).map(e=>pt(e,e.album)):void 0,type:"playlist",user:{id:t.id.toString(),name:t.name,link:"https://www.deezer.com/profile/".concat(t.id)}}),pt=(e,t)=>({album:{id:t.id.toString(),link:"https://www.deezer.com/album/".concat(t.id),title:t.title,cover_big:t.cover_big,cover_small:t.cover_small},artist:{id:e.artist.id.toString(),name:e.artist.name,link:"https://www.deezer.com/artist/".concat(e.artist.id),picture_big:e.artist.picture_big,picture_small:e.artist.picture_small},duration:e.duration,id:e.id.toString(),link:"https://www.deezer.com/track/".concat(e.id),preview:e.preview,title:e.title,type:"track"}),bt=(()=>{const e=e=>new Promise((t,a)=>{ut()(e,void 0,(e,r)=>{e?a(new Error(e.message)):t(r)})}),t=function(){var t=Object(c.a)(n.a.mark((function t(a,r){var c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r?"".concat("https://api.deezer.com","/").concat(a,"?").concat(r,"&output=jsonp&callback="):"".concat("https://api.deezer.com","/").concat(a,"?output=jsonp&callback="),t.next=3,e(c);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),a=(e,a)=>t("search/".concat(e),"q=".concat(encodeURIComponent(a))),r=(e,a)=>Promise.all(a.map(function(){var a=Object(c.a)(n.a.mark((function a(r){var c;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t("".concat(e,"/").concat(r));case 2:return c=a.sent,a.abrupt("return",c.error?null:c);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())),o=function(){var e=Object(c.a)(n.a.mark((function e(t,a){var c,o,s,i,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=!0,o=a.map(()=>null);case 2:if(!o.includes(null)){e.next=17;break}if(s=[],i=[],o.forEach((e,t)=>{e||(s.push(a[t]),i.push(t))}),c){e.next=10;break}return console.debug("[Deezer] Handling rate limit delayed batch...",{subIds:s}),e.next=10,ee(5e3);case 10:return e.next=12,r(t,s);case 12:l=e.sent,i.forEach((e,t)=>{o[e]=l[t]}),c=!1,e.next=2;break;case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("album",t);case 2:return e.abrupt("return",e.sent.data.map(dt));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("playlist",t);case 2:return e.abrupt("return",e.sent.data.filter(e=>e.public).map(e=>mt(e,e.user)));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("track",t);case 2:return e.abrupt("return",e.sent.data.filter(e=>e.readable&&e.preview).map(e=>pt(e,e.album)));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,o,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([s(t),i(t),l(t)]);case 2:return a=e.sent,r=Object(X.a)(a,3),c=r[0],o=r[1],u=r[2],e.abrupt("return",{album:c,playlist:o,track:u});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("album",t);case 2:return a=e.sent,e.abrupt("return",a.map(e=>dt(e)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("playlist",t);case 2:return a=e.sent,e.abrupt("return",a.map(e=>mt(e,e.creator)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{search:u,searchAlbums:s,searchPlaylists:i,searchTracks:l,loadContainers:function(){var e=Object(c.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="album"===e.t0?3:"playlist"===e.t0?4:5;break;case 3:return e.abrupt("return",d(a));case 4:return e.abrupt("return",m(a));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),loadTracks:function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("track",t);case 2:return a=e.sent,e.abrupt("return",a.map(e=>pt(e,e.album)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(),ft=[{label:"medias.albums",provider:"deezer",type:"album"},{label:"medias.playlists",provider:"deezer",type:"playlist"},{label:"medias.tracks",provider:"deezer",type:"track"}],vt=({items:e,label:t,cb:a})=>e.length>0?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"ModalField"},s.a.createElement("label",null,t)),e.slice(0,5).map(e=>s.a.createElement("div",{key:e.id,className:"ModalField"},s.a.createElement("div",{className:"SearchResultItem"},a(e))))):null;a(98);const gt=()=>{const e=Object(l.b)(),t=Object(S.b)().t,a=Object(o.useRef)(null),r=Object(l.c)(A),i=Object(o.useState)(""),u=Object(X.a)(i,2),d=u[0],m=u[1],p=Object(o.useState)("track"),b=Object(X.a)(p,2),f=b[0],v=b[1],g=Object(o.useState)("deezer"),k=Object(X.a)(g,1)[0],h=Object(o.useState)(""),y=Object(X.a)(h,2),E=y[0],w=y[1],O=Object(o.useState)({album:[],playlist:[],track:[]}),j=Object(X.a)(O,2),x=j[0],_=j[1],C=Object(o.useCallback)(()=>e(B()),[e]),N=Object(o.useCallback)(Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(E.trim().length>0)){e.next=6;break}return e.t0=_,e.next=4,bt.search(E);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)}))),[E]),P=Object(o.useCallback)((t,a,r)=>e(ve(t,a,[r],!0,!1)),[e]),T=Object(o.useCallback)((t,a)=>{e(ve(k,t,[a],!1,!0)),m(a),v(t)},[e,k]),M=Object(o.useCallback)(()=>{e(Me()),m(""),v("track")},[e]);return Object(o.useEffect)(()=>(a.current&&a.current.focus(),()=>{e(Me())}),[e]),s.a.createElement(et,{className:"SearchModal",title:t("medias.medias_search"),onSubmit:N,renderButtons:()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{disabled:0===E.trim().length,title:t("medias.search"),kind:"primary",icon:"search",type:"submit"}),s.a.createElement(tt,{onClick:C}))},s.a.createElement("div",{className:"ModalField"},s.a.createElement("input",{id:"modal-query",type:"text",placeholder:t("medias.search_placeholder"),maxLength:100,minLength:2,required:!0,value:E,ref:a,onChange:e=>w(e.target.value)})),ft.map(({label:e,type:a})=>s.a.createElement(vt,{key:a,label:t(e),items:x[a],cb:e=>s.a.createElement(Q,{actions:r?null:s.a.createElement(R,{title:t("medias.add"),icon:"plus",onClick:()=>P(k,a,e.id)}),media:e,mediaType:a,playable:!0,playing:f===a&&d===e.id,onPlay:()=>T(a,e.id),onStop:M})})))},kt=()=>{const e=Object(l.b)(),t=Object(o.useState)(""),a=Object(X.a)(t,2),r=a[0],n=a[1],c=Object(o.useRef)(null),i=Object(S.b)().t;Object(o.useEffect)(()=>{c.current&&c.current.focus()},[]);const u=Object(o.useCallback)(()=>e(B()),[e]),d=Object(o.useCallback)(()=>{e(xe(r)),e(B())},[e,r]);return s.a.createElement(et,{title:i("rooms.room_unlocking"),onSubmit:d,renderButtons:()=>s.a.createElement(s.a.Fragment,null,s.a.createElement(R,{disabled:36!==r.length,title:i("rooms.unlock"),kind:"primary",icon:"unlock",type:"submit"}),s.a.createElement(tt,{onClick:u}))},s.a.createElement("div",{className:"ModalField"},s.a.createElement("label",{htmlFor:"modal-secret"},i("rooms.key")),s.a.createElement("input",{id:"modal-secret",type:"password",autoComplete:"password",placeholder:i("rooms.key_placeholder"),maxLength:36,minLength:36,required:!0,value:r,ref:c,onChange:e=>n(e.target.value)})))};a(99);const ht=()=>{const e=Object(l.b)(),t=Object(l.c)(e=>e.modals.stack.length>0?e.modals.stack[e.modals.stack.length-1]:void 0),a=Object(o.useState)(void 0),r=Object(X.a)(a,2),n=r[0],c=r[1],i=Object(o.useState)(void 0),u=Object(X.a)(i,2),d=u[0],m=u[1],p=Object(o.useCallback)(()=>e(B()),[e]);Object(o.useEffect)(()=>{const e=e=>{27===e.keyCode&&p()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),Object(o.useEffect)(()=>{c(void 0),m(t)},[t]),Object(o.useEffect)(()=>{t&&setTimeout(()=>{c(t)},300)},[t,d]);const b=(e=>{if(e)switch(e.type){case"Confirm":return s.a.createElement(at,e.props);case"ConnectUser":return s.a.createElement(nt,null);case"CreateRoom":return s.a.createElement(ot,null);case"CreateUser":return s.a.createElement(it,null);case"Search":return s.a.createElement(gt,null);case"UnlockRoom":return s.a.createElement(kt,null)}return null})(n||d);return s.a.createElement(Ye.CSSTransition,{in:!!n,timeout:300,unmountOnExit:!0},s.a.createElement("div",{className:"ModalOverlay",onClick:e=>{e.stopPropagation(),p()}},b&&s.a.createElement("div",{className:"ModalWrapper",role:"dialog",onClick:e=>{e.stopPropagation()}},b)))},yt=e=>e.messages.sort((e,t)=>e.stamp-t.stamp);a(107);const Et=()=>{const e=Object(S.b)().t,t=Object(l.c)(yt);return s.a.createElement("div",{className:"Messages"},s.a.createElement(Ye.TransitionGroup,null,t.map(t=>s.a.createElement(Ye.CSSTransition,{key:t.id,classNames:"Message",timeout:{enter:200,exit:200}},s.a.createElement("div",{className:x()("Message","Message-"+t.type)},e(t.text))))))};a(108);const wt=()=>{const e=Object(l.b)();return Object(o.useEffect)(()=>{e(Xe())},[e]),s.a.createElement("div",{className:"App"},s.a.createElement(ht,null),s.a.createElement(d.d,null,s.a.createElement(d.b,{exact:!0,path:"/room/:room_id",component:Ve}),s.a.createElement(d.b,{exact:!0,path:"/",component:$e}),s.a.createElement(d.a,{to:"/"})),s.a.createElement(Et,null))};let Ot=null;const jt=()=>(Ot||(Ot=new(window.AudioContext||window.webkitAudioContext)),Ot),xt=e=>new Promise((t,a)=>jt().decodeAudioData(e,t,a)),_t=(e,t)=>new Promise((a,r)=>{const o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.addEventListener("error",()=>r(new Error("player.errors.cannot_load_audio_buffer")),!1),o.addEventListener("load",Object(c.a)(n.a.mark((function c(){return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.t0=a,n.next=4,xt(o.response);case 4:n.t1=n.sent,(0,n.t0)(n.t1),n.next=12;break;case 8:n.prev=8,n.t2=n.catch(0),console.debug("An error occurred while decoding audio data",{trackId:e,url:t}),r(new Error("player.errors.cannot_decode_audio_data"));case 12:case"end":return n.stop()}}),c,null,[[0,8]])}))),!1),o.send()}),Ct=[],St=function(){var e=Object(c.a)(n.a.mark((function e(t,a){var r,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}throw console.error("Track has invalid URL",{trackId:t}),new Error("Invalid URL");case 3:if(r=null,!((c=Ct.findIndex(e=>e.url===a))>=0)){e.next=10;break}console.debug("Reusing cached audio buffer...",{trackId:t,url:a}),r=Ct.splice(c,1)[0].buffer,e.next=14;break;case 10:return console.debug("Loading audio buffer...",{trackId:t,url:a}),e.next=13,_t(t,a);case 13:r=e.sent;case 14:return Ct.push({buffer:r,url:a}),Ct.splice(10),e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();(()=>{const e=()=>{document.removeEventListener("click",e),document.removeEventListener("touchstart",e),console.debug("Fixing audio context...");const t=jt();var a=t.createBuffer(1,1,22050),r=t.createBufferSource();r.buffer=a,r.connect(t.destination),r.start(0)};document.addEventListener("click",e),document.addEventListener("touchstart",e)})();const Nt=e=>{let t=null,a=null,r=null,o=null,s=null,i=0,l="",u=-1;const d=()=>{if(!r){const e=jt();r=e.destination,a=e.createGain(),a.gain.value=1,a.connect(r),r=a,t=e.createAnalyser(),t.fftSize=128,t.connect(r),r=t}return r},m=function(){var t=Object(c.a)(n.a.mark((function t(a,r,c,m){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return t.next=4,St(r,c);case 4:o=t.sent,console.debug("Starting audio...",{trackPosition:a,trackId:r,trackUrl:c}),l=r,u=a,s=jt().createBufferSource(),s.buffer=o,s.loop=!1,s.loopStart=0,s.loopEnd=0,s.onended=()=>{console.debug("Audio terminated..."),o=null,s=null,e&&u++},s.playbackRate.value=1,s.connect(d()),s.start(0,m),i=jt().currentTime;case 18:case"end":return t.stop()}}),t)})));return function(e,a,r,n){return t.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(e=>{null!==s?(console.debug("Stopping audio..."),s.onended=()=>{console.debug("Forced audio termination..."),e()},s.stop(),s=null,i=0,u=-1):e()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{analyserNode:t,gainNode:a,getPlayingTrackID:()=>l,getPlayingTrackPercent:()=>o&&s?(jt().currentTime-i)/o.duration:0,getPlayingTrackPosition:()=>u,isPlaying:()=>!!s,play:m,stop:p}};var Pt=a(38),Tt={splash:{CGU:"CGU",powered_with:"Powered with"},users:{errors:{invalid:"User is invalid"},user:"User",confirm_disconnect:"Are you sure you want to disconnect?",connect:"Connect",connection:"Connection",create:"Create a user",disconnect:"Disconnect",user_creation:"User Registration",id_is_invalid:"ID is invalid",id_placeholder:"User ID...",user_id:"User ID",name_is_invalid:"Name is invalid",name_placeholder:"User Name...",name:"User Name",secret_is_invalid:"Secret is invalid",secret_placeholder:"User Secret...",secret:"User Secret"},rooms:{errors:{invalid:"Room is invalid",locked:"Room is locked"},clear:"Clear all tracks",confirm_clear:"Are you sure you want to remove all tracks?",confirm_exit:"Are you sure you want to leave the room?",confirm_lock:"Are you sure you want to lock the room?",copy_link:"Copy Room Link to Clipboard",create:"Create a room",empty:"It's empty here, you should add some tracks...",empty_for_now:"It's empty here, the owner has to fill it..",exit:"Exit Room",key_placeholder:"Room Key...",key:"Room Key",link_copied_to_clipboard:"Room link has been copied to clipboard",loading:"Loading...",locked:"Locked (click to unlock)",name_is_invalid:"Name is invalid",name_placeholder:"Room Name...",name:"Room Name",room_creation:"Room Creation",room_unlocking:"Room Unlocking",room:"Room",secret_is_invalid:"Secret is invalid",unlock:"Unlock",unlocked:"Unlocked (click to lock)",track_count:"{{count}} track",track_count_plural:"{{count}} tracks"},medias:{by:"by {{artist}}",add:"Add",remove:"Remove",search:"Search Media",search_placeholder:"Search...",medias_search:"Media Search",albums:"Albums",playlists:"Playlists",tracks:"Tracks"},player:{errors:{cannot_decode_audio_data:"Audio buffer cannot be decoded",cannot_load_audio_buffer:"Audio buffer loading failed"},backward:"Backward",forward:"Forward",play:"Play",playing:"Playing",stop:"Stop"},cancel:"Cancel",copy_to_clipboard:"Copy to Clipboard",secret_copied_to_clipboard:"Secret has been copied to clipboard"},Rt={splash:{CGU:"CGU",powered_with:"boost\xe9 avec"},users:{errors:{invalid:"L'utilisateur est invalide"},user:"Utilisateur",confirm_disconnect:"\xcates-vous s\xfbr(e) de vouloir vous d\xe9connecter ?",connect:"Se connecter",connection:"Connexion",create:"Cr\xe9er un utilisateur",disconnect:"Se d\xe9connecter",user_creation:"Cr\xe9ation d'un utilisateur",id_is_invalid:"L'identifiant est invalide",id_placeholder:"Identifiant...",user_id:"Identifiant",name_is_invalid:"Le nom est invalide",name_placeholder:"Nom...",name:"Nom",secret_is_invalid:"Le secret est invalide",secret_placeholder:"Secret...",secret:"Secret"},rooms:{errors:{invalid:"La salle est invalide",locked:"La salle est verrouill\xe9e"},clear:"Supprimer toutes les pistes",confirm_clear:"\xcates-vous s\xfbr(e) de vouloir supprimer toutes les pistes ?",confirm_exit:"\xcates-vous s\xfbr(e) de vouloir quitter la salle ?",confirm_lock:"\xcates-vous s\xfbr(e) de vouloir verrouiller la salle ?",copy_link:"Copier le lien de la salle dans le presse-papier",create:"Cr\xe9er une salle",empty:"Cette salle est vide, vous devriez ajouter quelques pistes...",empty_for_now:"Cette salle est pour le moment vide...",exit:"Quitter la salle",key_placeholder:"Clef...",key:"Clef",loading:"Chargement...",link_copied_to_clipboard:"Le lien de la salle a \xe9t\xe9 copi\xe9 dans le presse-papier",locked:"Verrouill\xe9e (cliquer pour d\xe9verrouiller)",name_is_invalid:"Le nom est invalide",name_placeholder:"Nom...",name:"Nom",room:"Salle",room_creation:"Cr\xe9ation d'une salle",room_unlocking:"D\xe9verrouillage de la salle",secret_is_invalid:"Le secret is invalide",unlock:"D\xe9verrouiller",unlocked:"D\xe9verrouill\xe9e (cliquer pour verrouiller)",track_count:"{{count}} piste",track_count_plural:"{{count}} pistes"},medias:{by:"par {{artist}}",add:"Ajouter",remove:"Supprimer",search:"Chercher des m\xe9dias",search_placeholder:"Recherche...",medias_search:"Recherche de m\xe9dias",albums:"Albums",playlists:"Playlists",tracks:"Pistes"},player:{errors:{cannot_decode_audio_data:"Le buffer audio ne peut pas \xeatre d\xe9cod\xe9",cannot_load_audio_buffer:"Le buffer audio ne peut pas \xeatre charg\xe9"},backward:"Piste pr\xe9c\xe9dente",forward:"Piste suivante",play:"Lire",playing:"En cours de lecture",stop:"Arr\xeater"},cancel:"Annuler",copy_to_clipboard:"Copier dans le presse-papier",secret_copied_to_clipboard:"Le secret a \xe9t\xe9 copi\xe9 dans le presse-papier"};const Mt=function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((e,t)=>{console.debug("Initializing language...",{current:navigator.language||navigator.userLanguage}),Pt.a.use(S.a).init({fallbackLng:"en",lng:navigator.language||navigator.userLanguage,resources:{en:{translation:Tt},"en-US":{translation:Tt},fr:{translation:Rt},"fr-FR":{translation:Rt}},interpolation:{escapeValue:!1,format:(e,t,a)=>e}},a=>{a&&t(a),e()})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Lt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function It(e,t){console.log("PWA registerValidSW 1"),navigator.serviceWorker.register(e).then(e=>{console.log("PWA registerValidSW 2"),e.onupdatefound=()=>{console.log("PWA registerValidSW 3");const a=e.installing;null!=a&&(console.log("PWA registerValidSW 4"),a.onstatechange=()=>{console.log("PWA registerValidSW 5",a.state),"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("PWA registerValidSW 6"),console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("PWA registerValidSW 7"),console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}a(109);!function(e){if("serviceWorker"in navigator){if(console.log("PWA register 1",""),new URL("",window.location.href).origin!==window.location.origin)return void console.log("PWA register 2");window.addEventListener("load",()=>{const t="".concat("","/service-worker.js");console.log("PWA register 3"),Lt?(console.log("PWA register 4"),function(e,t){console.log("PWA checkValidServiceWorker 1"),fetch(e,{headers:{"Service-Worker":"script"}}).then(a=>{const r=a.headers.get("content-type");console.log("PWA checkValidServiceWorker 2",r,a.status),404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):It(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):(console.log("PWA register 5"),It(t,e))})}}(),function(){var e=Object(c.a)(n.a.mark((function e(){var t,a,r,c,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.compose,a=bt,r=Nt(!0),c=Nt(!1),Mt(),o=Object(m.createStore)(O,t(Object(m.applyMiddleware)(p.a.withExtraArgument({deezer:a,queuePlayer:r,previewPlayer:c})))),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then(e=>{i.render(o.createElement(l.a,{store:e},o.createElement(u.a,null,o.createElement(d.b,{path:"/",component:wt}))),document.getElementById("root"))})},58:function(e,t,a){e.exports=a(110)},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[58,1,2]]]);
//# sourceMappingURL=main.fd35258f.chunk.js.map