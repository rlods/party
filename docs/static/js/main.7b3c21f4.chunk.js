(this["webpackJsonpparty-app"]=this["webpackJsonpparty-app"]||[]).push([[0],{107:function(e,t,r){},108:function(e,t,r){},109:function(e,t,r){},110:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),o=r(2),s=r(0),c=r.n(s),i=r(19),l=r(3),u=r(20),d=r(17),p=(r(68),r(14)),m=r(50),b=r(16),h=r(5);const f={fetching:!1,error:null,medias:{album:{},playlist:{},track:{}}},v=[],g={stack:[]},k={playing:!1,track_percent:0},y={fetching:!1,error:null,room:null,access:{id:"",secret:""},color:{fg:{r:0,g:0,b:0},bg:{r:255,g:255,b:255}},info:null,medias:[],playing:!1,position:0},E={fetching:!1,error:null,user:null,access:(()=>{const e={id:"",secret:""},t=localStorage.getItem("U");if(t)try{const r=JSON.parse(atob(t));"string"===typeof r.i&&"string"===typeof r.s&&(e.id=r.i,e.secret=r.s,console.debug("Loaded user access: ",e))}catch(r){}return e})(),info:null},w=Object(p.combineReducers)({medias:(e=f,t)=>{switch(t.type){case"medias/FETCHING":return Object(h.a)({},e,{fetching:!0,error:null});case"medias/FETCHED":return Object(h.a)({},e,{fetching:!1,error:null});case"medias/ERROR":return Object(h.a)({},e,{fetching:!1,error:t.payload});case"medias/SET":{const o=Object(h.a)({},e,{medias:{album:Object(h.a)({},e.medias.album),playlist:Object(h.a)({},e.medias.playlist),track:Object(h.a)({},e.medias.track)}});var r,n=Object(b.a)(t.payload);try{for(n.s();!(r=n.n()).done;){const e=r.value;o.medias[e.type][e.id]=e}}catch(a){n.e(a)}finally{n.f()}return o}case"medias/RESET":return f;default:return e}},messages:(e=v,t)=>{switch(t.type){case"message/ADD":return[t.payload,...e];case"message/REMOVE":return e.filter(e=>e.id!==t.payload);case"message/RESET":return v;default:return e}},modals:(e=g,t)=>{switch(t.type){case"modals/OPEN":return Object(h.a)({},e,{stack:[t.payload]});case"modals/CLOSE":return Object(h.a)({},e,{stack:[]});case"modals/PUSH":return Object(h.a)({},e,{stack:[...e.stack,t.payload]});case"modals/POP":const r=[...e.stack];return r.pop(),Object(h.a)({},e,{stack:r});default:return e}},player:(e=k,t)=>{switch(t.type){case"player/SET":return Object(h.a)({},e,{},t.payload);case"player/RESET":return k;default:return e}},room:(e=y,t)=>{switch(t.type){case"room/FETCHING":return Object(h.a)({},e,{fetching:!0,error:null});case"room/FETCHED":return Object(h.a)({},e,{fetching:!1,error:null});case"room/ERROR":return Object(h.a)({},e,{fetching:!1,error:t.payload});case"room/SET":return Object(h.a)({},e,{},t.payload);case"room/RESET":return y;default:return e}},user:(e=E,t)=>{switch(t.type){case"user/FETCHING":return Object(h.a)({},e,{fetching:!0,error:null});case"user/FETCHED":return Object(h.a)({},e,{fetching:!1,error:null});case"user/ERROR":return Object(h.a)({},e,{fetching:!1,error:t.payload});case"user/SET":{const r=Object(h.a)({},e,{},t.payload);return(({id:e,secret:t})=>{localStorage.setItem("U",btoa(JSON.stringify({i:e,s:t})))})(r.access),r}case"user/RESET":return localStorage.removeItem("U"),E;default:return e}}});var x=r(51),C=r(4),_=r(7),S=r.n(_),O=r(55),j=r.n(O);r(81);class M extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.className,r=e.color,n=e.icon,a=e.size,o=void 0===a?"M":a,s=e.title;return c.a.createElement(j.a,{className:S()("Icon",t,o),name:n,style:{color:r},title:s})}}}var N=M;const R=({size:e})=>c.a.createElement(M,{className:"rotating",icon:"circle-o-notch",size:e,title:"Loading"});r(82);class T extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.className,r=e.color,n=e.disabled,a=void 0!==n&&n,o=e.displayTitle,s=void 0!==o&&o,i=e.icon,l=e.kind,u=void 0===l?"default":l,d=e.onClick,p=e.size,m=e.title,b=e.type,h=void 0===b?"button":b;return c.a.createElement("button",{type:h,"aria-label":m,className:S()("IconButton",t,u,p,{clickable:!a&&(!!d||"submit"===h)}),onClick:a?void 0:d,title:m},c.a.createElement(N,{color:r,icon:i,size:p}),s&&c.a.createElement("div",{className:S()("IconButtonTitle",p)},m))}}}var P=T;class L extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.onClick,r=e.t;return c.a.createElement(T,{onClick:t,title:r("cancel"),kind:"default",icon:"ban"})}}}const I=Object(C.b)()(L);var q=r(9),F=Object(q.b)();const U=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(e=>{const r=document.createElement("textarea");r.value=t,r.setAttribute("readonly",""),r.style.position="absolute",r.style.left="-9999px",document.body.appendChild(r);const n=document.getSelection();if(null!==n){const e=n.rangeCount>0&&n.getRangeAt(0);r.select(),document.execCommand("copy"),!1!==e&&(n.removeAllRanges(),n.addRange(e))}document.body.removeChild(r),e()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r(83);class z extends s.Component{constructor(...e){var t;super(...e),t=this,this.render=()=>{const e=this.props,t=e.room,r=e.t;return c.a.createElement("div",{className:"Head"},c.a.createElement("div",{className:"RoomLink"},c.a.createElement(P,{icon:"link",onClick:this.onCopyLink,size:"M",title:r("rooms.copy_link")})),c.a.createElement("div",{className:"RoomName"},t?t.name:""),c.a.createElement("div",{className:"RoomExit"},c.a.createElement(P,{onClick:this.onExit,icon:"sign-out",size:"M",title:r("rooms.exit")})))},this.onCopyLink=Object(o.a)(a.a.mark((function e(){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.onMessage,o=r.t,e.next=3,U(document.location.href.split("?")[0]);case 3:n(o("rooms.link_copied_to_clipboard"));case 4:case"end":return e.stop()}}),e)}))),this.onExit=()=>{const e=this.props;(0,e.onConfirm)((0,e.t)("rooms.confirm_exit"),()=>{F.push("/")})}}}var D=Object(C.b)()(z);const A=e=>e.room.info,B=e=>!!e.room.room,G=e=>!e.room.access.secret;function H(e,t){return void 0===t?{type:e}:{type:e,payload:t}}const W=e=>H("modals/OPEN",e),V=()=>H("modals/POP"),K=(e,t,r)=>Object(o.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:window.confirm(e)?t():r&&r();case 1:case"end":return n.stop()}}),n)})));let J=0;const Q=(e,t,r=5e3)=>n=>{const a=J++;n(H("message/ADD",{id:a,stamp:(new Date).getTime(),text:t,type:e})),setTimeout(()=>n((e=>H("message/REMOVE",e))(a)),r)},X=e=>t=>{t(Q("error",e,3e3))};var Y=Object(l.b)(e=>({room:A(e)}),e=>({onConfirm:(t,r)=>{e(K(t,r))},onMessage:t=>e(Q("info",t))}))(D);r(84);class Z extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.playable,r=e.playing,n=e.image,a=e.onPlay,o=e.onStop,s=e.t;return t?c.a.createElement("div",{className:S()("Cover",{playable:t,playing:r}),style:n?{backgroundImage:"url('".concat(n,"')")}:{},onClick:r?o:a},r?c.a.createElement(N,{icon:"pause",title:s("player.stop")}):c.a.createElement(N,{icon:"play",title:s("player.play")})):c.a.createElement("div",{className:S()("Cover",{playing:r}),style:n?{backgroundImage:"url('".concat(n,"')")}:{}},r?c.a.createElement(N,{icon:"music",title:s("player.playing")}):null)}}}var $=Object(C.b)()(Z);r(85);class ee extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.actions,r=e.media,n=e.mediaType,a=e.playable,o=e.playing,s=e.onPlay,i=e.onStop,l=e.t;if(!r)return c.a.createElement("div",{className:"Media"},t,c.a.createElement($,{playable:a,playing:o,image:"",onPlay:s,onStop:i}),c.a.createElement("div",{className:"Metas"},c.a.createElement(R,{size:"M"})));if("album"===n){const e=r;return c.a.createElement("div",{className:"Media Album"},t,c.a.createElement($,{playable:a,playing:o,image:e.cover_small,onPlay:s,onStop:i}),c.a.createElement("div",{className:"Metas"},c.a.createElement("div",{className:"Meta AlbumTitle"},c.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},e.title)),c.a.createElement("div",{className:"Meta AlbumArtist"},c.a.createElement("a",{href:e.artist.link,target:"_blank",rel:"noopener noreferrer"},l("medias.by",{artist:e.artist.name})))))}if("playlist"===n){const e=r;return c.a.createElement("div",{className:"Media Playlist"},t,c.a.createElement($,{playable:a,playing:o,image:e.picture_small,onPlay:s,onStop:i}),c.a.createElement("div",{className:"Metas"},c.a.createElement("div",{className:"Meta PlaylistTitle"},c.a.createElement("a",{href:r.link,target:"_blank",rel:"noopener noreferrer"},r.title)),c.a.createElement("div",{className:"Meta PlaylistCreator"},c.a.createElement("a",{href:e.user.link,target:"_blank",rel:"noopener noreferrer"},l("medias.by",{artist:e.user.name})))))}if("track"===n){const e=r;return c.a.createElement("div",{className:"Media Track"},t,c.a.createElement($,{playable:a&&!!e.preview,playing:o,image:e.album.cover_small,onPlay:s,onStop:i}),c.a.createElement("div",{className:"Metas"},c.a.createElement("div",{className:"Meta TrackTitle"},c.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},e.title)),c.a.createElement("div",{className:"Meta TrackArtist"},c.a.createElement("a",{href:e.artist.link,target:"_blank",rel:"noopener noreferrer"},l("medias.by",{artist:e.artist.name})))))}}}}var te=Object(C.b)()(ee);class re extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.locked,r=e.media,n=e.mediaType,a=e.playing,o=e.onPlay,s=e.onRemove,i=e.onStop,l=e.t;return c.a.createElement("div",{className:"QueueItem"},c.a.createElement(te,{media:r,mediaType:n,playable:!!r&&!t,playing:a,onPlay:o,onStop:i,actions:t?null:c.a.createElement(P,{title:l("medias.remove"),icon:"trash",onClick:s})}))}}}var ne=Object(C.b)()(re);r(86);class ae extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.loaded,r=e.locked,n=e.medias,a=e.playing,o=e.playingIndex,s=e.onPlay,i=e.onRemove,l=e.onSearch,u=e.onStop,d=e.t;return c.a.createElement("div",{className:"Queue"},n.length>0?n.map((e,t)=>c.a.createElement(ne,{key:t,locked:r,playing:a&&o===t,media:e,mediaType:"track",onPlay:()=>s(t),onRemove:()=>i(t),onStop:u})):c.a.createElement("div",{className:"QueueEmpty"},t?c.a.createElement(c.a.Fragment,null,c.a.createElement(P,{title:"...",icon:"shower",onClick:l,size:"L"}),c.a.createElement("span",{onClick:l},d("rooms.empty"))):c.a.createElement(c.a.Fragment,null,c.a.createElement(R,{size:"L"}),c.a.createElement("span",null,d("rooms.loading")))))}}}var oe=Object(C.b)()(ae);const se=(e,t)=>{const r=[],n=e.medias.medias;var a,o=Object(b.a)(t);try{for(o.s();!(a=o.n()).done;){const e=a.value,t=n[e.type][e.id];t?r.push(t):r.push(null)}}catch(s){o.e(s)}finally{o.f()}return r};var ce=r(111),ie=r(18);r(87);const le={databaseURL:"https://test-rl-7ffe8.firebaseio.com"};console.debug(le);var ue=le;const de=e=>new Promise(t=>setTimeout(t,e)),pe=(e,t,r)=>r.indexOf(e)===t,me=(e,t,r)=>((e,t)=>{const r=e[t];return r||void 0})(e,r)||((e,t)=>e.find(e=>e.id===t))(t,r),be=ie.initializeApp(ue),he=ie.database(be),fe=he.ref("members"),ve=he.ref("rooms"),ge=he.ref("users"),ke=(e,t)=>{const r=ve.child(e),n=r.child("info"),s=fe.child(e);let c=t||"";console.debug("INIT SECRET",c);let i={name:"dummy",playing:!1,queue:{},queue_position:0,timestamp:0,type:"dj"};return{getInfo:()=>i,id:e,isLocked:()=>!c,setSecret:e=>{console.debug("[Firebase] Setting room secret",{oldSecret:c,newSecret:e}),c=e},wait:function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((e,t)=>{console.debug("[Firebase] Waiting room..."),n.once("value",r=>{const n=r.val();n?(i=n,e(i)):t(new Error("rooms.errors.invalid"))})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),subscribeInfo:e=>{console.debug("[Firebase] Subscribing room..."),n.on("value",e)},subscribeMembers:(e,t)=>{console.debug("[Firebase] Subscribing members..."),s.on("child_added",e),s.on("child_removed",t)},unsubscribeInfo:e=>{console.debug("[Firebase] Unsubscribing room..."),n.off("value",e)},unsubscribeMembers:(e,t)=>{console.debug("[Firebase] Unsubscribing members..."),s.off("child_added",e),s.off("child_removed",t)},update:function(){var e=Object(o.a)(a.a.mark((function e({name:t,playing:n,queue:o,queue_position:s}){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("[Firebase] Updating room...",{name:t,playing:n,queue:o,queue_position:s}),void 0!==t&&(i.name=t),void 0!==n&&(i.playing=n),void 0!==o&&(i.queue=o),void 0!==s&&(i.queue_position=s),e.next=7,r.set({info:Object(h.a)({},i,{timestamp:ie.database.ServerValue.TIMESTAMP}),secret:c});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},ye=(e,t)=>{const r=ge.child(e),n=r.child("info");let s=null,c=t||"",i={name:"dummy",online:!1,room_id:"",status:"",timestamp:0};const l=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((e,t)=>{console.debug("[Firebase] Waiting user..."),n.once("value",r=>{const n=r.val();n?(i=n,e(i)):t(new Error("users.errors.invalid"))})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(a.a.mark((function e({name:t,room_id:n}){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("[Firebase] Updating user...",{name:t,room_id:n}),void 0!==t&&(i.name=t),void 0!==n&&(i.room_id=n),e.next=5,r.set({info:Object(h.a)({},i,{online:!0,status:"online",timestamp:ie.database.ServerValue.TIMESTAMP}),secret:c});case 5:d();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=()=>{console.debug("[Firebase] Installing user disconnect..."),r.onDisconnect().cancel(),r.onDisconnect().set({info:Object(h.a)({},i,{online:!1,room_id:"",status:"disconnected",timestamp:ie.database.ServerValue.TIMESTAMP}),secret:c})};return{id:e,enter:function(){var t=Object(o.a)(a.a.mark((function t(r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=4;break}return t.next=3,s.remove();case 3:s=null;case 4:return t.next=6,u({room_id:r.id});case 6:return s=fe.child(r.id).child(e),s.onDisconnect().remove(),t.next=10,s.set({timestamp:ie.database.ServerValue.TIMESTAMP});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),exit:function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=4;break}return e.next=3,s.remove();case 3:s=null;case 4:return e.next=6,u({room_id:""});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isLocked:()=>!c,setSecret:e=>{console.debug("[Firebase] Setting user secret...",{oldSecret:c,newSecret:e}),c=e},wait:l,subscribeInfo:e=>{console.debug("[Firebase] Subscribing user..."),n.on("value",e)},unsubscribeInfo:e=>{console.debug("[Firebase] Unsubscribing user..."),n.off("value",e)},update:u,getInfo:()=>i}},Ee=e=>e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message,we=e=>H("medias/SET",e),xe=(e,t,r,n,s)=>function(){var c=Object(o.a)(a.a.mark((function o(c,i,{deezer:l,previewPlayer:u}){var d,p,m,h,f,v,g,k,y,E,w,x,C,_,S,O,j,M,N;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(r.length>0)){a.next=72;break}if(d=i(),p=d.medias.medias,a.prev=2,"track"!==t){a.next=26;break}if(m=p.track,h=r.filter(e=>!m[e]).filter(pe),f=[],!(h.length>0)){a.next=13;break}return console.debug("Loading tracks...",{mediaIds:h}),a.next=11,l.loadTracks(h);case 11:f=a.sent,c(we(f));case 13:if(n&&(console.debug("Enqueuing tracks...",{mediaIds:r}),c(Te(e,r))),!s){a.next=24;break}if(v=r[0],!(g=me(m,f,v))){a.next=23;break}return console.debug("Previewing track...",{track:g,trackId:v}),a.next=21,u.play(0,g.id,g.preview,0);case 21:a.next=24;break;case 23:console.debug("Cannot load track to preview...");case 24:a.next=67;break;case 26:if(k=p[t],y=r.filter(e=>!k[e]).filter(pe),E=[],!(y.length>0)){a.next=38;break}return console.debug("Loading containers...",{mediaIds:y}),a.next=33,l.loadContainers(t,y);case 33:E=a.sent,w=[...E],x=Object(b.a)(E);try{for(x.s();!(C=x.n()).done;)_=C.value,w.push(..._.tracks)}catch(o){x.e(o)}finally{x.f()}c(we(w));case 38:if(n){console.debug("Enqueuing containers tracks...",{mediaIds:r}),S=Object(b.a)(r);try{for(S.s();!(O=S.n()).done;)j=O.value,(_=me(k,E,j))&&c(Te(e,_.tracks.map(e=>e.id)))}catch(o){S.e(o)}finally{S.f()}}if(!s){a.next=67;break}g=null,M=Object(b.a)(r),a.prev=42,M.s();case 44:if((N=M.n()).done){a.next=52;break}if(j=N.value,!((_=me(k,E,j))&&_.tracks&&_.tracks.length>0)){a.next=50;break}return g=_.tracks[0],a.abrupt("break",52);case 50:a.next=44;break;case 52:a.next=57;break;case 54:a.prev=54,a.t0=a.catch(42),M.e(a.t0);case 57:return a.prev=57,M.f(),a.finish(57);case 60:if(!g){a.next=66;break}return console.debug("Previewing container first track..."),a.next=64,u.play(0,g.id,g.preview,0);case 64:a.next=67;break;case 66:console.debug("Cannot load track to preview...");case 67:a.next=72;break;case 69:a.prev=69,a.t1=a.catch(2),c(X(Ee(a.t1)));case 72:case"end":return a.stop()}}),o,null,[[2,69],[42,54,57,60]])})));return function(e,t,r){return c.apply(this,arguments)}}(),Ce=e=>H("room/SET",e),_e=(e,t)=>function(){var r=Object(o.a)(a.a.mark((function r(n){var o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=Object(ce.a)(),console.debug("Creating room...",{id:o,secret:t}),r.next=5,ke(o,t).update({name:e});case 5:n(Oe(o,t)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),n(X(Ee(r.t0)));case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}();let Se=null;const Oe=(e,t)=>function(){var r=Object(o.a)(a.a.mark((function r(n,o){var s,c,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=o(),(c=s.room.room)&&c.id===e){r.next=23;break}return n(je()),r.prev=3,console.debug("Entering room...",{id:e,secret:t}),i=ke(e,t),r.t0=n,r.t1=Ce,r.t2={id:e,secret:t},r.t3=i,r.next=12,i.wait();case 12:r.t4=r.sent,r.t5={access:r.t2,room:r.t3,info:r.t4},r.t6=(0,r.t1)(r.t5),(0,r.t0)(r.t6),Se=i.subscribeInfo(e=>{const t=e.val();console.debug("[Firebase] Received room update...",t);let r=[];t.queue&&(r=Object.entries(t.queue).sort((e,t)=>Number(e[0])-Number(t[0])).map(e=>e[1]),n(xe("deezer","track",r.map(e=>e.id),!1,!1))),n(Ce({medias:r,playing:t.playing,position:t.queue_position,room:i,info:t}))}),F.push("/room/".concat(e,"?key=").concat(t)),r.next=23;break;case 20:r.prev=20,r.t7=r.catch(3),n(X(Ee(r.t7)));case 23:case"end":return r.stop()}}),r,null,[[3,20]])})));return function(e,t){return r.apply(this,arguments)}}(),je=()=>function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(),(o=n.room.room)&&(console.debug("Exiting room..."),o.unsubscribeInfo(Se),Se=null,t(H("room/RESET")));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Me=()=>function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(),o=n.room,s=o.room,c=o.access.id,s&&s.id===c&&(console.debug("Locking room...",{id:c}),s.setSecret(""),t(Ce({access:{id:c,secret:""}})));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Ne=e=>function(){var t=Object(o.a)(a.a.mark((function t(r,n){var o,s,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n(),s=o.room,c=s.room,i=s.access.id,c&&c.id===i&&(console.debug("Unlocking room...",{id:i,secret:e}),c.setSecret(e),r(Ce({access:{id:i,secret:e}})));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Re=()=>function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),!(o=n.room.room)||o.isLocked()){e.next=14;break}return e.prev=2,console.debug("Clearing queue..."),e.next=6,o.update({queue:{},queue_position:0});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),t(X(Ee(e.t0))),t(Me());case 12:e.next=15;break;case 14:t(X("rooms.error.locked"));case 15:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,r){return e.apply(this,arguments)}}(),Te=(e,t)=>function(){var r=Object(o.a)(a.a.mark((function r(n,o){var s,c,i,l,u;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=o(),!(c=s.room.room)||c.isLocked()){r.next=18;break}if(!(t.length>0)){r.next=16;break}return i=o(),l=i.room.medias,r.prev=4,console.debug("Appending queue...",{trackIds:t}),u={},[...l.map(e=>e.id),...t].forEach((t,r)=>{u[r]={id:t,provider:e,type:"track"}}),r.next=10,c.update({queue:u});case 10:r.next=16;break;case 12:r.prev=12,r.t0=r.catch(4),n(X(Ee(r.t0))),n(Me());case 16:r.next=19;break;case 18:n(X("rooms.error.locked"));case 19:case"end":return r.stop()}}),r,null,[[4,12]])})));return function(e,t){return r.apply(this,arguments)}}(),Pe=e=>function(){var t=Object(o.a)(a.a.mark((function t(r,n){var o,s,c,i,l,u,d,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n(),s=o.room,c=s.medias,i=s.position,!(l=s.room)||l.isLocked()){t.next=20;break}if(!(e<c.length)){t.next=18;break}return t.prev=3,console.debug("Removing from queue...",{index:e}),u=i%c.length,d={},(p=[...c]).splice(e,1),p.forEach((e,t)=>{d[t]=e}),t.next=12,l.update({queue:d,queue_position:e<u?i-1:i});case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),r(X(Ee(t.t0))),r(Me());case 18:t.next=21;break;case 20:r(X("rooms.error.locked"));case 21:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e,r){return t.apply(this,arguments)}}(),Le=e=>function(){var t=Object(o.a)(a.a.mark((function t(r,n){var o,s,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n(),s=o.room,c=s.position,!(i=s.room)||i.isLocked()){t.next=15;break}if(c===e){t.next=13;break}return t.prev=3,console.debug("Set queue position...",{oldPosition:c,newPosition:e}),t.next=7,i.update({queue_position:e});case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),r(X(Ee(t.t0))),r(Me());case 13:t.next=16;break;case 15:r(X("rooms.error.locked"));case 16:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,r){return t.apply(this,arguments)}}(),Ie=()=>function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(),o=n.room,s=o.medias,c=o.position,s.length>0&&(console.debug("Moving backward..."),t(Le(c>0?c-1:s.length-1)));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),qe=()=>function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(),o=n.room,s=o.medias,c=o.position,s.length>0&&(console.debug("Moving forward..."),t(Le(c+1)));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var Fe=r(28),Ue=r(35);const ze={},De={bg:{r:255,g:255,b:255},fg:{r:0,g:0,b:0}},Ae=function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=De,!t){e.next=18;break}if(r=ze[t]){e.next=18;break}return e.prev=4,e.next=7,Ue.read(t);case 7:return n=e.sent,e.next=10,n.resize(1,1).getPixelColor(0,0);case 10:o=e.sent,s=Ue.intToRGBA(o),ze[t]=r={bg:s,fg:.299*s.r+.587*s.g+.114*s.b>186?{r:0,g:0,b:0}:{r:255,g:255,b:255}},e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.debug("An error prevented colorpicking",e.t0);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),Be=e=>H("player/SET",e),Ge=()=>function(){var e=Object(o.a)(a.a.mark((function e(t,r,{queuePlayer:n}){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ve||Ke||(Qe(t,r,n),Xe(t,r,n),t(Be({playing:!0})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),He=()=>function(){var e=Object(o.a)(a.a.mark((function e(t,r,{queuePlayer:n}){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ve||!Ke){e.next=8;break}return clearTimeout(Ve),Ve=null,clearTimeout(Ke),Ke=null,e.next=7,n.stop();case 7:t(H("player/RESET"));case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),We=()=>function(){var e=Object(o.a)(a.a.mark((function e(t,r,{previewPlayer:n}){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("Stop previewing..."),e.next=3,n.stop();case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();let Ve=null,Ke=null;const Je=(e,t,r)=>{let n=-1;const a=e.getPlayingTrackID(),o=e.getPlayingTrackPosition();return o!==t?n=e.isPlaying()?t:o>=0?o:t:a!==r[t%r.length].id&&(n=t),n},Qe=(e,t,r)=>{Ve=setTimeout(Object(o.a)(a.a.mark((function n(){var o,s,c,i,l,u,d,p,m,b,h;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t(),s=o.room,c=s.medias,i=s.position,l=o.medias.medias.track,!(c.length>0)){n.next=23;break}if(!((u=Je(r,i,c))>=0)){n.next=20;break}return d=u%c.length,p=l[c[d].id],console.debug("Detected play change...",{nextIndex:d,nextTrack:p,nextTrackPosition:u}),n.prev=7,e(Le(u)),n.next=11,Promise.all([Ae(p.album.cover_small),r.play(u,p.id,p.preview,0)]);case 11:m=n.sent,b=Object(Fe.a)(m,1),h=b[0],e(Ce({color:h})),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(7),e(X(Ee(n.t0)));case 20:Qe(e,t,r),n.next=25;break;case 23:console.debug("No more tracks in queue..."),e(He());case 25:case"end":return n.stop()}}),n,null,[[7,17]])}))),250)},Xe=(e,t,r)=>{Ke=setTimeout(()=>{t().room.medias.length>0&&(e(Be({track_percent:r.getPlayingTrackPercent()})),Xe(e,t,r))},250)};var Ye=Object(l.b)(e=>({loaded:B(e),locked:G(e),medias:se(e,e.room.medias),playing:e.player.playing,playingIndex:e.room.position%e.room.medias.length}),e=>({onPlay:t=>{e(Ge()),e(Le(t))},onRemove:t=>e(Pe(t)),onSearch:()=>e(W({type:"Search",props:null})),onStop:()=>e(He())}))(oe);r(89);class Ze extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.playing,r=e.value;return c.a.createElement("div",{className:S()("Progress",{playing:t})},c.a.createElement("progress",{max:100,value:100*r}))}}}var $e=Ze;var et=Object(l.b)(e=>({playing:e.player.playing,value:e.player.track_percent}),e=>({}))($e);r(90);class tt extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.onMoveBackward,r=e.onMoveForward,n=e.onPlay,a=e.onSearch,o=e.onStop,s=e.onUnlock,i=e.tracksCount,l=e.locked,u=e.playing,d=e.t;return c.a.createElement("div",{className:"Controls"},c.a.createElement("div",{className:"ControlsSet"},c.a.createElement("div",{className:"Control"},c.a.createElement(P,{disabled:l||0===i,icon:"step-backward",onClick:t,size:"M",title:d("player.backward")})),c.a.createElement("div",{className:"Control"},u?c.a.createElement(P,{disabled:l||0===i,onClick:o,icon:"pause",title:d("player.stop"),size:"L"}):c.a.createElement(P,{disabled:l||0===i,onClick:n,icon:"play",size:"L",title:d("player.play")})),c.a.createElement("div",{className:"Control"},c.a.createElement(P,{disabled:l||0===i,icon:"step-forward",onClick:r,size:"M",title:d("player.forward")}))),c.a.createElement(et,null),c.a.createElement("div",{className:"ControlsSet"},c.a.createElement("div",{className:"Control"},c.a.createElement(P,{disabled:l||0===i,onClick:this.onClear,icon:"trash",title:d("rooms.clear")})),c.a.createElement("div",{className:"Control"},c.a.createElement(P,{onClick:a,icon:"search",title:d("medias.search")})),c.a.createElement("div",{className:"Control"},l?c.a.createElement(P,{icon:"lock",onClick:s,size:"M",title:d("rooms.locked")}):c.a.createElement(P,{icon:"unlock",onClick:this.onLock,size:"M",title:d("rooms.unlocked")}))))},this.onClear=()=>{const e=this.props,t=e.onClear;(0,e.onConfirm)((0,e.t)("rooms.confirm_clear"),t)},this.onLock=()=>{const e=this.props;(0,e.onConfirm)((0,e.t)("rooms.confirm_lock"),this.props.onLock)}}}var rt=Object(C.b)()(tt);var nt=Object(l.b)(e=>({tracksCount:e.room.medias.length,locked:G(e),playing:e.player.playing}),e=>({onClear:()=>{e(Re()),e(He())},onConfirm:(t,r)=>{e(K(t,r))},onLock:()=>e(Me()),onUnlock:()=>e(W({type:"UnlockRoom",props:null})),onMessage:t=>e(Q("info",t)),onMoveBackward:()=>e(Ie()),onMoveForward:()=>e(qe()),onPlay:()=>e(Ge()),onSearch:()=>e(W({type:"Search",props:null})),onStop:()=>e(He())}))(rt);r(91);class at extends s.Component{constructor(...e){super(...e),this.componentDidMount=()=>{this.props.onEnter()},this.componentWillUnmount=()=>{this.props.onExit()},this.render=()=>{const e=this.props.color,t=e.fg,r=e.bg;return c.a.createElement("div",{className:"Room",style:{color:"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"),backgroundColor:"rgb(".concat(r.r,", ").concat(r.g,", ").concat(r.b,")")}},c.a.createElement(Y,null),c.a.createElement(Ye,null),c.a.createElement(nt,null))}}}var ot=Object(d.g)(at);var st=Object(l.b)((e,t)=>({color:e.room.color}),(e,t)=>{const r=x.parse(t.location.search.substr(1)).key;return{onEnter:()=>e(Oe(t.match.params.room_id,r||"")),onExit:()=>e(je())}})(ot);r(93);class ct extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.loggedIn,r=e.onCreateRoom,n=e.onConnectUser,a=e.t;return c.a.createElement("div",{className:"Splash"},c.a.createElement("div",{className:"Top"},c.a.createElement("div",{className:"Logo"},c.a.createElement(u.b,{to:"/"},"Party")),c.a.createElement("div",{className:"PoweredWith"},c.a.createElement("span",null,a("splash.powered_with")),c.a.createElement("a",{href:"https://www.deezer.com",target:"_blank",rel:"noopener noreferrer"},c.a.createElement("img",{src:"/images/deezer.svg",height:"20px",title:"Deezer",alt:"Deezer Logo"})))),c.a.createElement("div",{className:"Middle"},c.a.createElement("div",{className:"Menu"},t?c.a.createElement("div",{className:"MenuItem"},c.a.createElement(P,{displayTitle:!0,icon:"plus",onClick:r,size:"L",title:a("rooms.create")})):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"MenuItem"},c.a.createElement(P,{displayTitle:!0,onClick:n,icon:"sign-in",size:"L",title:a("users.connect")}))))),c.a.createElement("div",{className:"Bottom"},c.a.createElement("div",{className:"Menu"},t?c.a.createElement("div",{className:"MenuItem"},c.a.createElement(P,{displayTitle:!0,icon:"sign-out",onClick:this.onDisconnect,size:"M",title:a("users.disconnect")})):c.a.createElement("div",{className:"MenuItem"},c.a.createElement(P,{displayTitle:!0,icon:"info",onClick:()=>{},size:"M",title:a("splash.CGU")})))))},this.onDisconnect=()=>{const e=this.props,t=e.onConfirm,r=e.onDisconnectUser;t((0,e.t)("users.confirm_disconnect"),r)}}}var it=Object(C.b)()(ct);const lt=e=>e.user.info,ut=e=>H("user/SET",e),dt=(e,t)=>function(){var r=Object(o.a)(a.a.mark((function r(n){var o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.debug("Creating user..."),o=Object(ce.a)(),r.next=5,ye(o,t).update({name:e});case 5:n(mt(o,t)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),n(X(Ee(r.t0)));case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}();let pt=null;const mt=(e,t)=>function(){var r=Object(o.a)(a.a.mark((function r(n,o){var s,c,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=o(),(c=s.user.user)&&c.id===e){r.next=23;break}return n(bt()),r.prev=3,console.debug("Connection user...",{id:e,secret:t}),i=ye(e),r.t0=n,r.t1=ut,r.t2={id:e,secret:t},r.t3=i,r.next=12,i.wait();case 12:r.t4=r.sent,r.t5={access:r.t2,user:r.t3,info:r.t4},r.t6=(0,r.t1)(r.t5),(0,r.t0)(r.t6),pt=i.subscribeInfo(e=>{const t=e.val();console.debug("[Firebase] Received user update...",t),n(ut({user:i,info:t}))}),r.next=23;break;case 19:r.prev=19,r.t7=r.catch(3),n(X(Ee(r.t7))),n(ut({access:{id:e,secret:""}}));case 23:case"end":return r.stop()}}),r,null,[[3,19]])})));return function(e,t){return r.apply(this,arguments)}}(),bt=()=>function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(),(o=n.user.user)&&(console.debug("Disconnecting user..."),o.unsubscribeInfo(pt),pt=null,t(H("user/RESET")));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ht=()=>function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(),o=n.user.access,s=o.id,c=o.secret,s&&c&&(console.debug("Reconnecting user...",{id:s,secret:c}),t(mt(s,c)));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var ft=Object(l.b)(e=>({loggedIn:!!e.user.access.id,user:lt(e)}),e=>({onConfirm:(t,r)=>{e(K(t,r))},onCreateRoom:()=>e(W({type:"CreateRoom",props:null})),onConnectUser:()=>e(W({type:"CreateUser",props:null})),onDisconnectUser:()=>e(bt())}))(it),vt=r(23);class gt extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.children,r=e.className,n=e.title,a=e.renderFoot,o=e.onClose,s=e.onPop,i=e.has_prev_modal,l=e.t;return c.a.createElement("form",{className:S()("Modal",r),onSubmit:this.onSubmit},c.a.createElement("div",{className:"ModalHead"},c.a.createElement(P,{kind:"special",className:S()("ModalHeadBack",{hidden:!i}),icon:"angle-left",title:"Back",onClick:s}),c.a.createElement("div",{className:"ModalTitle"},n),c.a.createElement(P,{kind:"special",className:"ModalHeadClose",onClick:o,title:l("cancel"),icon:"times"})),c.a.createElement("div",{className:"ModalBody"},t),c.a.createElement("div",{className:"ModalFoot"},a&&a()))},this.onSubmit=e=>{e.preventDefault(),this.props.onSubmit&&this.props.onSubmit()}}}var kt=Object(C.b)()(gt);var yt=Object(l.b)(e=>({has_prev_modal:e.modals.stack.length>1}),e=>({onClose:()=>e(V()),onPop:()=>e(V())}))(kt);r(94);class Et extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.children,r=e.className,n=e.renderButtons,a=e.title,o=e.onSubmit;return c.a.createElement(yt,{className:S()("FormModal",r),title:a,renderFoot:n,onSubmit:o},t)}}}var wt=Et;class xt extends s.Component{constructor(...e){super(...e),this.render=()=>{const e=this.props,t=e.question,r=e.t;return c.a.createElement(wt,{title:r("confirm"),onSubmit:this.props.onConfirmed,renderButtons:this.renderButtons},t)},this.renderButtons=()=>{const e=this.props.t;return c.a.createElement(c.a.Fragment,null,c.a.createElement(P,{title:e("cancel"),kind:"primary",icon:"plus",type:"submit"}),c.a.createElement(I,{onClick:this.props.onCancel}))}}}var Ct=Object(C.b)()(xt);var _t=Object(l.b)(e=>({}),(e,t)=>({onCancel:()=>{e(V()),t.onCanceled&&t.onCanceled()}}))(Ct);class St extends s.Component{constructor(...e){super(...e),this.idRef=Object(s.createRef)(),this.state={id:"",secret:""},this.render=()=>{const e=this.props.t,t=this.state,r=t.id,n=t.secret;return c.a.createElement(wt,{title:e("users.connection"),onSubmit:this.onConnect,renderButtons:this.renderButtons},c.a.createElement("div",{className:"ModalField"},c.a.createElement("label",{htmlFor:"modal-id"},e("users.user_id")),c.a.createElement("input",{id:"modal-id",type:"text",placeholder:e("users.id_placeholder"),maxLength:36,minLength:36,required:!0,value:r,ref:this.idRef,onChange:e=>{this.setState({id:e.target.value})}})),c.a.createElement("div",{className:"ModalField"},c.a.createElement("label",{htmlFor:"modal-secret"},e("users.secret")),c.a.createElement("input",{id:"modal-secret",type:"password",placeholder:e("users.secret_placeholder"),maxLength:36,minLength:36,required:!0,value:n,onChange:e=>{this.setState({secret:e.target.value})}})))},this.renderButtons=()=>{const e=this.props.t;return c.a.createElement(c.a.Fragment,null,c.a.createElement(P,{title:e("users.connect"),kind:"primary",icon:"sign-in",type:"submit"}),c.a.createElement(I,{onClick:this.props.onClose}),c.a.createElement(P,{title:e("users.create"),kind:"default",icon:"plus",onClick:this.props.onToggle}))},this.onConnect=()=>{const e=this.props,t=e.onClose,r=e.onConnect,n=e.onError,a=this.state,o=a.id,s=a.secret;0!==o.trim().length?0!==s.trim().length?(r(o,s),t()):n("users.secret_is_invalid"):n("users.id_is_invalid")}}componentDidMount(){this.idRef.current&&this.idRef.current.focus()}}var Ot=Object(C.b)()(St);var jt=Object(l.b)(e=>({}),e=>({onClose:()=>e(V()),onConnect:(t,r)=>e(mt(t,r)),onError:t=>e(X(t)),onToggle:()=>e(W({type:"CreateUser",props:null}))}))(Ot);class Mt extends s.Component{constructor(...e){var t;super(...e),t=this,this.render=()=>{const e=this.props,t=e.id,r=e.label,n=e.onChange,a=e.placeholder,o=e.value;return c.a.createElement("div",{className:"ModalField"},c.a.createElement("label",{htmlFor:t},r),c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},c.a.createElement("input",{style:{flexGrow:1,marginRight:"0.5rem"},id:t,type:"password",placeholder:a,maxLength:36,minLength:36,required:!0,value:o,onChange:e=>n(e.target.value)}),c.a.createElement(P,{icon:"clipboard",onClick:this.onCopyToClipboard,size:"M",title:"Copy to Clipboard"})))},this.onCopyToClipboard=Object(o.a)(a.a.mark((function e(){var r,n,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.onMessage,o=r.value,s=r.t,e.next=3,U(o);case 3:n(s("secret_copied_to_clipboard"));case 4:case"end":return e.stop()}}),e)})))}}var Nt=Object(C.b)()(Mt);var Rt=Object(l.b)(e=>({}),e=>({onMessage:t=>e(Q("info",t))}))(Nt);let Tt=1;class Pt extends s.Component{constructor(...e){super(...e),this.nameRef=Object(s.createRef)(),this.state={name:"",secret:Object(ce.a)()},this.render=()=>{const e=this.props.t,t=this.state,r=t.name,n=t.secret;return c.a.createElement(wt,{title:e("rooms.room_creation"),onSubmit:this.onCreate,renderButtons:this.renderButtons},c.a.createElement("div",{className:"ModalField"},c.a.createElement("label",{htmlFor:"modal-name"},e("rooms.name")),c.a.createElement("input",{id:"modal-name",type:"text",placeholder:e("rooms.name_placeholder"),maxLength:100,minLength:2,required:!0,value:r,ref:this.nameRef,onChange:e=>this.setState({name:e.target.value})})),c.a.createElement(Rt,{id:"modal-secret",label:e("rooms.key"),placeholder:e("rooms.key_placeholder"),value:n,onChange:e=>this.setState({secret:e})}))},this.renderButtons=()=>{const e=this.props.t;return c.a.createElement(c.a.Fragment,null,c.a.createElement(P,{title:e("rooms.create"),kind:"primary",icon:"plus",type:"submit"}),c.a.createElement(I,{onClick:this.props.onClose}))},this.onCreate=()=>{const e=this.props,t=e.onClose,r=e.onCreate,n=e.onError,a=this.state,o=a.name,s=a.secret;0!==o.trim().length?0!==s.trim().length?(r(o,s),t(),Tt++):n("rooms.secret_is_invalid"):n("rooms.name_is_invalid")}}componentDidMount(){this.setState({name:"".concat(this.props.t("rooms.room")," ").concat(Tt)}),this.nameRef.current&&this.nameRef.current.focus()}}var Lt=Object(C.b)()(Pt);var It=Object(l.b)(e=>({}),e=>({onClose:()=>e(V()),onCreate:(t,r)=>e(_e(t,r)),onError:t=>e(X(t))}))(Lt);let qt=1;class Ft extends s.Component{constructor(...e){super(...e),this.nameRef=Object(s.createRef)(),this.state={name:"",secret:Object(ce.a)()},this.render=()=>{const e=this.props.t,t=this.state,r=t.name,n=t.secret;return c.a.createElement(wt,{title:e("users.user_creation"),onSubmit:this.onCreate,renderButtons:this.renderButtons},c.a.createElement("div",{className:"ModalField"},c.a.createElement("label",{htmlFor:"modal-name"},e("users.name")),c.a.createElement("input",{id:"modal-name",type:"text",placeholder:e("users.name_placeholder"),maxLength:100,minLength:2,required:!0,value:r,ref:this.nameRef,onChange:e=>this.setState({name:e.target.value})})),c.a.createElement(Rt,{id:"modal-secret",label:e("users.secret"),placeholder:e("users.secret_placeholder"),value:n,onChange:e=>this.setState({secret:e})}))},this.renderButtons=()=>{const e=this.props.t;return c.a.createElement(c.a.Fragment,null,c.a.createElement(P,{title:e("users.create"),kind:"primary",icon:"plus",type:"submit"}),c.a.createElement(I,{onClick:this.props.onClose}),c.a.createElement(P,{title:e("users.connect"),kind:"default",icon:"sign-in",onClick:this.props.onToggle}))},this.onCreate=()=>{const e=this.props,t=e.onClose,r=e.onCreate,n=e.onError,a=this.state,o=a.name,s=a.secret;0!==o.trim().length?0!==s.trim().length?(r(o,s),t(),qt++):n("users.secret_is_invalid"):n("users.name_is_invalid")}}componentDidMount(){this.setState({name:"".concat(this.props.t("users.user")," ").concat(qt)}),this.nameRef.current&&this.nameRef.current.focus()}}var Ut=Object(C.b)()(Ft);var zt=Object(l.b)(e=>({}),e=>({onClose:()=>e(V()),onCreate:(t,r)=>e(dt(t,r)),onError:t=>e(X(t)),onToggle:()=>e(W({type:"ConnectUser",props:null}))}))(Ut),Dt=r(57),At=r.n(Dt);const Bt=e=>({artist:{id:e.artist.id.toString(),name:e.artist.name,link:"https://www.deezer.com/artist/".concat(e.artist.id),picture_big:e.artist.picture_big,picture_small:e.artist.picture_small},cover_big:e.cover_big,cover_small:e.cover_small,id:e.id.toString(),link:"https://www.deezer.com/album/".concat(e.id),title:e.title,tracks:void 0!==e.tracks?e.tracks.data.filter(e=>e.readable&&e.preview).map(t=>Ht(t,e)):void 0,type:"album"}),Gt=(e,t)=>({id:e.id.toString(),link:"https://www.deezer.com/playlist/".concat(e.id),picture_big:e.picture_big,picture_small:e.picture_small,title:e.title,tracks:void 0!==e.tracks?e.tracks.data.filter(e=>e.readable&&e.preview).map(e=>Ht(e,e.album)):void 0,type:"playlist",user:{id:t.id.toString(),name:t.name,link:"https://www.deezer.com/profile/".concat(t.id)}}),Ht=(e,t)=>({album:{id:t.id.toString(),link:"https://www.deezer.com/album/".concat(t.id),title:t.title,cover_big:t.cover_big,cover_small:t.cover_small},artist:{id:e.artist.id.toString(),name:e.artist.name,link:"https://www.deezer.com/artist/".concat(e.artist.id),picture_big:e.artist.picture_big,picture_small:e.artist.picture_small},duration:e.duration,id:e.id.toString(),link:"https://www.deezer.com/track/".concat(e.id),preview:e.preview,title:e.title,type:"track"}),Wt=(()=>{const e=e=>new Promise((t,r)=>{At()(e,void 0,(e,n)=>{e?r(new Error(e.message)):t(n)})}),t=function(){var t=Object(o.a)(a.a.mark((function t(r,n){var o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n?"".concat("https://api.deezer.com","/").concat(r,"?").concat(n,"&output=jsonp&callback="):"".concat("https://api.deezer.com","/").concat(r,"?output=jsonp&callback="),t.next=3,e(o);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r=(e,r)=>t("search/".concat(e),"q=".concat(encodeURIComponent(r))),n=(e,r)=>Promise.all(r.map(function(){var r=Object(o.a)(a.a.mark((function r(n){var o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t("".concat(e,"/").concat(n));case 2:return o=r.sent,r.abrupt("return",o.error?null:o);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())),s=function(){var e=Object(o.a)(a.a.mark((function e(t,r){var o,s,c,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=!0,s=r.map(()=>null);case 2:if(!s.includes(null)){e.next=17;break}if(c=[],i=[],s.forEach((e,t)=>{e||(c.push(r[t]),i.push(t))}),o){e.next=10;break}return console.debug("Handling rate limit delayed batch...",{subIds:c}),e.next=10,de(5e3);case 10:return e.next=12,n(t,c);case 12:l=e.sent,i.forEach((e,t)=>{s[e]=l[t]}),o=!1,e.next=2;break;case 17:return e.abrupt("return",s);case 18:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),c=e=>r("album",e),i=e=>r("playlist",e),l=e=>r("track",e),u=function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([c(t),i(t),l(t)]);case 2:return r=e.sent,n=Object(Fe.a)(r,3),o=n[0],s=n[1],u=n[2],e.abrupt("return",{album:o.data.map(Bt),playlist:s.data.filter(e=>e.public).map(e=>Gt(e,e.user)),track:u.data.filter(e=>e.readable&&e.preview).map(e=>Ht(e,e.album))});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("album",t);case 2:return r=e.sent,e.abrupt("return",r.map(e=>Bt(e)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("playlist",t);case 2:return r=e.sent,e.abrupt("return",r.map(e=>Gt(e,e.creator)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{search:u,loadContainers:function(){var e=Object(o.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="album"===e.t0?3:"playlist"===e.t0?4:5;break;case 3:return e.abrupt("return",d(r));case 4:return e.abrupt("return",p(r));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),loadTracks:function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("track",t);case 2:return r=e.sent,e.abrupt("return",r.map(e=>Ht(e,e.album)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(),Vt=[{label:"medias.albums",provider:"deezer",type:"album"},{label:"medias.playlists",provider:"deezer",type:"playlist"},{label:"medias.tracks",provider:"deezer",type:"track"}];var Kt=({items:e,label:t,cb:r})=>e.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"ModalField"},c.a.createElement("label",null,t)),e.slice(0,5).map(e=>c.a.createElement("div",{key:e.id,className:"ModalField"},c.a.createElement("div",{className:"SearchResultItem"},r(e))))):null;r(98);class Jt extends s.Component{constructor(...e){var t;super(...e),t=this,this.queryRef=Object(s.createRef)(),this.state={playingMediaId:"",playingMediaType:"track",provider:"deezer",query:"",results:{album:[],playlist:[],track:[]}},this.render=()=>{const e=this.props.t;return c.a.createElement(wt,{className:"SearchModal",title:e("medias.medias_search"),onSubmit:this.onSearch,renderButtons:this.renderButtons},this.renderInputs(),this.renderResults())},this.renderButtons=()=>{const e=this.props.t;return c.a.createElement(c.a.Fragment,null,c.a.createElement(P,{title:e("medias.search"),kind:"primary",icon:"search",type:"submit"}),c.a.createElement(I,{onClick:this.props.onClose}))},this.renderInputs=()=>{const e=this.props.t,t=this.state.query;return c.a.createElement("div",{className:"ModalField"},c.a.createElement("input",{id:"modal-query",type:"text",placeholder:e("medias.search_placeholder"),maxLength:100,minLength:2,required:!0,value:t,ref:this.queryRef,onChange:e=>{this.setState({query:e.target.value})}}))},this.renderResults=()=>{const e=this.props,t=e.onSelect,r=e.locked,n=e.t,a=this.state,o=a.playingMediaId,s=a.playingMediaType,i=a.provider,l=a.results;return Vt.map(({label:e,type:a})=>c.a.createElement(Kt,{key:a,label:n(e),items:l[a],cb:e=>c.a.createElement(te,{actions:r?null:c.a.createElement(P,{title:n("medias.add"),icon:"plus",onClick:()=>t(i,a,e.id)}),media:e,mediaType:a,playable:!0,playing:s===a&&o===e.id,onPlay:()=>this.onStartPreview(a,e.id),onStop:this.onStopPreview})}))},this.onSearch=Object(o.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=t.state.query).trim().length>0)){e.next=8;break}return e.t0=t,e.next=5,Wt.search(r);case 5:e.t1=e.sent,e.t2={results:e.t1},e.t0.setState.call(e.t0,e.t2);case 8:case"end":return e.stop()}}),e)}))),this.onStartPreview=(e,t)=>{this.props.onPlay(this.state.provider,e,t),this.setState({playingMediaId:t,playingMediaType:e})},this.onStopPreview=()=>{this.props.onStop(),this.setState({playingMediaId:"",playingMediaType:"track"})}}componentDidMount(){this.queryRef.current&&this.queryRef.current.focus()}componentWillUnmount(){this.props.onStop()}}var Qt=Object(C.b)()(Jt);var Xt=Object(l.b)(e=>({locked:G(e)}),e=>({onClose:()=>e(V()),onSelect:(t,r,n)=>e(xe(t,r,[n],!0,!1)),onPlay:(t,r,n)=>e(xe(t,r,[n],!1,!0)),onStop:()=>e(We())}))(Qt);class Yt extends s.Component{constructor(...e){super(...e),this.secretRef=Object(s.createRef)(),this.state={secret:""},this.render=()=>{const e=this.props.t,t=this.state.secret;return c.a.createElement(wt,{title:e("rooms.room_unlocking"),onSubmit:this.onUnlock,renderButtons:this.renderButtons},c.a.createElement("div",{className:"ModalField"},c.a.createElement("label",{htmlFor:"modal-secret"},e("rooms.key")),c.a.createElement("input",{id:"modal-secret",type:"password",placeholder:e("rooms.key_placeholder"),maxLength:36,minLength:36,required:!0,value:t,ref:this.secretRef,onChange:e=>{this.setState({secret:e.target.value})}})))},this.renderButtons=()=>{const e=this.props.t;return c.a.createElement(c.a.Fragment,null,c.a.createElement(P,{title:e("rooms.unlock"),kind:"primary",icon:"unlock",type:"submit"}),c.a.createElement(I,{onClick:this.props.onClose}))},this.onUnlock=()=>{const e=this.props,t=e.onClose;(0,e.onUnlock)(this.state.secret),t()}}componentDidMount(){this.secretRef.current&&this.secretRef.current.focus()}}var Zt=Object(C.b)()(Yt);var $t=Object(l.b)(e=>({}),e=>({onClose:()=>e(V()),onUnlock:t=>e(Ne(t))}))(Zt);r(99);class er extends s.Component{constructor(...e){super(...e),this.state={curr_prereq:void 0,prev_prereq:void 0},this.componentDidMount=()=>{document.addEventListener("keydown",this.onKeyDown)},this.componentWillUnmount=()=>{document.removeEventListener("keydown",this.onKeyDown)},this.componentDidUpdate=e=>{const t=e.prereq,r=this.props.prereq;t!==r&&this.setState({curr_prereq:void 0,prev_prereq:t},()=>{r&&setTimeout(()=>{this.setState({curr_prereq:r})},300)})},this.render=()=>{const e=this.state,t=e.curr_prereq,r=e.prev_prereq,n=t||r;let a=null;return n&&(a=(e=>{switch(e.type){case"Confirm":return c.a.createElement(_t,e.props);case"ConnectUser":return c.a.createElement(jt,null);case"CreateRoom":return c.a.createElement(It,null);case"CreateUser":return c.a.createElement(zt,null);case"Search":return c.a.createElement(Xt,null);case"UnlockRoom":return c.a.createElement($t,null)}})(n)),c.a.createElement(vt.CSSTransition,{in:!!t,timeout:300,unmountOnExit:!0},c.a.createElement("div",{className:"ModalOverlay",onClick:this.onClickOverlay},a&&c.a.createElement("div",{className:"ModalWrapper",role:"dialog",onClick:this.onClickWrapper},a)))},this.onClickOverlay=e=>{e.stopPropagation(),this.props.onCloseModal()},this.onClickWrapper=e=>{e.stopPropagation()},this.onKeyDown=e=>{27===e.keyCode&&this.props.onCloseModal()}}}var tr=er;var rr=Object(l.b)(e=>({prereq:e.modals.stack.length>0?e.modals.stack[e.modals.stack.length-1]:void 0}),e=>({onCloseModal:()=>e(V())}))(tr);r(107);class nr extends s.Component{constructor(...e){super(...e),this.render=()=>c.a.createElement("div",{className:"Messages"},c.a.createElement(vt.TransitionGroup,null,this.props.messages.map(this.renderMessage))),this.renderMessage=e=>c.a.createElement(vt.CSSTransition,{key:e.id,classNames:"Message",timeout:{enter:200,exit:200}},c.a.createElement("div",{className:S()("Message","Message-"+e.type)},this.props.t(e.text)))}}var ar=Object(C.b)()(nr);const or=e=>e.messages.sort((e,t)=>e.stamp-t.stamp);var sr=Object(l.b)(e=>({messages:or(e)}),e=>({}))(ar);r(108);class cr extends s.Component{constructor(...e){var t;super(...e),t=this,this.componentDidMount=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.onReconnect();case 1:case"end":return e.stop()}}),e)}))),this.render=()=>c.a.createElement("div",{className:"App"},c.a.createElement(rr,null),c.a.createElement(d.d,null,c.a.createElement(d.b,{exact:!0,path:"/room/:room_id",component:st}),c.a.createElement(d.b,{exact:!0,path:"/",component:ft}),c.a.createElement(d.a,{to:"/"})),c.a.createElement(sr,null))}}var ir=cr;var lr=Object(l.b)(e=>({}),e=>({onReconnect:()=>e(ht())}))(ir);let ur=null;const dr=()=>(ur||(ur=new(window.AudioContext||window.webkitAudioContext)),ur),pr=e=>new Promise((t,r)=>dr().decodeAudioData(e,t,r)),mr=(e,t)=>new Promise((r,n)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.addEventListener("error",()=>n(new Error("player.errors.cannot_load_audio_buffer")),!1),s.addEventListener("load",Object(o.a)(a.a.mark((function o(){return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.t0=r,a.next=4,pr(s.response);case 4:a.t1=a.sent,(0,a.t0)(a.t1),a.next=12;break;case 8:a.prev=8,a.t2=a.catch(0),console.debug("An error occurred while decoding audio data",{trackId:e,url:t}),n(new Error("player.errors.cannot_decode_audio_data"));case 12:case"end":return a.stop()}}),o,null,[[0,8]])}))),!1),s.send()}),br=[],hr=function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}throw console.error("Track has invalid URL",{trackId:t}),new Error("Invalid URL");case 3:if(n=null,!((o=br.findIndex(e=>e.url===r))>=0)){e.next=10;break}console.debug("Reusing cached audio buffer...",{trackId:t,url:r}),n=br.splice(o,1)[0].buffer,e.next=14;break;case 10:return console.debug("Loading audio buffer...",{trackId:t,url:r}),e.next=13,mr(t,r);case 13:n=e.sent;case 14:return br.push({buffer:n,url:r}),br.splice(10),e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();(()=>{const e=()=>{document.removeEventListener("click",e),document.removeEventListener("touchstart",e),console.debug("Fixing audio context...");const t=dr();var r=t.createBuffer(1,1,22050),n=t.createBufferSource();n.buffer=r,n.connect(t.destination),n.start(0)};document.addEventListener("click",e),document.addEventListener("touchstart",e)})();const fr=e=>{let t=null,r=null,n=null,s=null,c=null,i=0,l="",u=-1;const d=()=>{if(!n){const e=dr();n=e.destination,r=e.createGain(),r.gain.value=1,r.connect(n),n=r,t=e.createAnalyser(),t.fftSize=128,t.connect(n),n=t}return n},p=function(){var t=Object(o.a)(a.a.mark((function t(r,n,o,p){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:return t.next=4,hr(n,o);case 4:s=t.sent,console.debug("Starting audio...",{trackPosition:r,trackId:n,trackUrl:o}),l=n,u=r,c=dr().createBufferSource(),c.buffer=s,c.loop=!1,c.loopStart=0,c.loopEnd=0,c.onended=()=>{console.debug("Audio terminated..."),s=null,c=null,e&&u++},c.playbackRate.value=1,c.connect(d()),c.start(0,p),i=dr().currentTime;case 18:case"end":return t.stop()}}),t)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(e=>{null!==c?(console.debug("Stopping audio..."),c.onended=()=>{console.debug("Forced audio termination..."),e()},c.stop(),c=null,i=0,u=-1):e()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{analyserNode:t,gainNode:r,getPlayingTrackID:()=>l,getPlayingTrackPercent:()=>s&&c?(dr().currentTime-i)/s.duration:0,getPlayingTrackPosition:()=>u,isPlaying:()=>!!c,play:p,stop:m}};var vr=r(38),gr={splash:{CGU:"CGU",powered_with:"Powered with"},users:{errors:{invalid:"User is invalid"},user:"User",confirm_disconnect:"Are you sure you want to disconnect?",connect:"Connect",connection:"Connection",create:"Create a user",disconnect:"Disconnect",user_creation:"User Registration",id_is_invalid:"ID is invalid",id_placeholder:"User ID...",user_id:"User ID",name_is_invalid:"Name is invalid",name_placeholder:"User Name...",name:"User Name",secret_is_invalid:"Secret is invalid",secret_placeholder:"User Secret...",secret:"User Secret"},rooms:{errors:{invalid:"Room is invalid",locked:"Room is locked"},clear:"Clear all tracks",confirm_clear:"Are you sure you want to remove all tracks?",confirm_exit:"Are you sure you want to leave the room?",confirm_lock:"Are you sure you want to lock the room?",copy_link:"Copy Room Link to Clipboard",create:"Create a room",empty:"It's empty here, you should add some tracks...",exit:"Exit Room",key_placeholder:"Room Key...",key:"Room Key",link_copied_to_clipboard:"Room link has been copied to clipboard",loading:"Loading...",locked:"Locked (click to unlock)",name_is_invalid:"Name is invalid",name_placeholderl:"Room Name...",name:"Room Name",room_creation:"Room Creation",room_unlocking:"Room Unlocking",room:"Room",secret_is_invalid:"Secret is invalid",unlock:"Unlock",unlocked:"Unlocked (click to lock)"},medias:{by:"by {{artist}}",add:"Add",remove:"Remove",search:"Search Media",search_placeholder:"Search...",medias_search:"Media Search",albums:"Albums",playlists:"Playlists",tracks:"Tracks"},player:{errors:{cannot_decode_audio_data:"Audio buffer cannot be decoded",cannot_load_audio_buffer:"Audio buffer loading failed"},backward:"Backward",forward:"Forward",play:"Play",playing:"Playing",stop:"Stop"},cancel:"Cancel",secret_copied_to_clipboard:"Secret has been copied to clipboard"},kr={splash:{CGU:"CGU",powered_with:"boost\xe9 avec"},users:{errors:{invalid:"L'utilisateur est invalide"},user:"Utilisateur",confirm_disconnect:"\xcates-vous s\xfbr(e) de vouloir vous d\xe9connecter ?",connect:"Se connecter",connection:"Connexion",create:"Cr\xe9er un utilisateur",disconnect:"Se d\xe9connecter",user_creation:"Cr\xe9ation d'un utilisateur",id_is_invalid:"L'identifiant est invalide",id_placeholder:"Identifiant...",user_id:"Identifiant",name_is_invalid:"Le nom est invalide",name_placeholder:"Nom...",name:"Nom",secret_is_invalid:"Le secret est invalide",secret_placeholder:"Secret...",secret:"Secret"},rooms:{errors:{invalid:"La salle est invalide",locked:"La salle est verrouill\xe9e"},clear:"Supprimer toutes les pistes",confirm_clear:"\xcates-vous s\xfbr(e) de vouloir supprimer toutes les pistes ?",confirm_exit:"\xcates-vous s\xfbr(e) de vouloir quitter la salle ?",confirm_lock:"\xcates-vous s\xfbr(e) de vouloir verrouiller la salle ?",copy_link:"Copier le lien de la salle dans le presse-papier",create:"Cr\xe9er une salle",empty:"Cette salle est vide, vous devriez ajouter quelques pistes...",exit:"Quitter la salle",key_placeholder:"Clef...",key:"Clef",loading:"Chargement...",link_copied_to_clipboard:"Le lien de la salle a \xe9t\xe9 copi\xe9 dans le presse-papier",locked:"Verrouill\xe9e (cliquer pour d\xe9verrouiller)",name_is_invalid:"Le nom est invalide",name_placeholderl:"Nom...",name:"Nom",room_creation:"Cr\xe9ation d'une salle",room_unlocking:"D\xe9verrouillage de la salle",room:"Salle",secret_is_invalid:"Le secret is invalide",unlock:"D\xe9verrouiller",unlocked:"D\xe9verrouill\xe9e (cliquer pour verrouiller)"},medias:{by:"par {{artist}}",add:"Ajouter",remove:"Supprimer",search:"Chercher des m\xe9dias",search_placeholder:"Recherche...",medias_search:"Recherche de m\xe9dias",albums:"Albums",playlists:"Playlists",tracks:"Pistes"},player:{errors:{cannot_decode_audio_data:"Le buffer audio ne peut pas \xeatre d\xe9cod\xe9",cannot_load_audio_buffer:"Le buffer audio ne peut pas \xeatre charg\xe9"},backward:"Piste pr\xe9c\xe9dente",forward:"Piste suivante",play:"Lire",playing:"En cours de lecture",stop:"Arr\xeater"},cancel:"Annuler",secret_copied_to_clipboard:"Le secret a \xe9t\xe9 copi\xe9 dans le presse-papier"};const yr=function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((e,t)=>{console.debug("Initializing language..."),vr.a.use(C.a).init({fallbackLng:"en",lng:navigator.language||navigator.userLanguage,resources:{"en-US":{translation:gr},"fr-FR":{translation:kr}},interpolation:{escapeValue:!1,format:(e,t,r)=>e}},r=>{r&&t(r),e()})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r(109);(function(){var e=Object(o.a)(a.a.mark((function e(){var t,r,n,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.compose,r=Wt,n=fr(!0),o=fr(!1),yr(),s=Object(p.createStore)(w,t(Object(p.applyMiddleware)(m.a.withExtraArgument({deezer:r,queuePlayer:n,previewPlayer:o})))),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then(e=>{i.render(s.createElement(l.a,{store:e},s.createElement(u.a,null,s.createElement(d.b,{path:"/",component:lr}))),document.getElementById("root"))})},58:function(e,t,r){e.exports=r(110)},81:function(e,t,r){},82:function(e,t,r){},83:function(e,t,r){},84:function(e,t,r){},85:function(e,t,r){},86:function(e,t,r){},89:function(e,t,r){},90:function(e,t,r){},91:function(e,t,r){},93:function(e,t,r){},94:function(e,t,r){},98:function(e,t,r){},99:function(e,t,r){}},[[58,1,2]]]);
//# sourceMappingURL=main.7b3c21f4.chunk.js.map